!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=7)}([function(e,t){e.exports=jQuery},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,i=null,s=null,r=null;t.createCameras=function(e,o){var c=window.innerWidth/window.innerHeight;t.orbitControls=s=new THREE.Object3D,t.trailingCamera=a=new THREE.PerspectiveCamera(45,c,1,1e3),a.position.set(0,-250,50),n=a,s.tcontrols=new THREE.OrbitControls(a,o.domElement),s.tcontrols.maxPolarAngle=Math.PI,s.tcontrols.minPolarAngle=2.4,s.tcontrols.maxAzimuthAngle=Math.PI/6,s.tcontrols.minAzimuthAngle=-Math.PI/6,s.tcontrols.minDistance=50,s.tcontrols.maxDistance=250,s.tcontrols.enableDamping=!0,s.tcontrols.dampingFactor=.25,s.tcontrols.enableZoom=!0,s.tcontrols.update(),t.hoveringCamera=i=new THREE.PerspectiveCamera(45,c,1,1e3),i.position.set(0,350,450),i.lookAt(e.position),s.hcontrols=new THREE.OrbitControls(i,o.domElement),s.hcontrols.maxPolarAngle=1.4,s.hcontrols.minPolarAngle=Math.PI/4,s.hcontrols.maxAzimuthAngle=Math.PI/2,s.hcontrols.minAzimuthAngle=-Math.PI/2,s.hcontrols.minDistance=50,s.hcontrols.maxDistance=400,s.hcontrols.enableDamping=!0,s.hcontrols.dampingFactor=.25,s.hcontrols.enableZoom=!0,s.hcontrols.update(),t.inspectCamera=r=new THREE.PerspectiveCamera(35,c,.1,1e3),r.position.set(0,2,25)},t.getActiveCamera=function(){return n},t.setActiveCamera=function(e){n=e},t.hoveringCamera=i,t.trailingCamera=a,t.orbitControls=s,t.inspectCamera=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PedSegments=t.CarSegments=t.pathList=t.getDP=t.createPaths=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(o(3));var a=[],i=[],s={redCar:31,blueCar:32},r={boy1:41,robot1:42},c={DP1:0,DP2:1,DP3:2,DP4:3,DP5:4,DP6:5,DP7:6,DP8:7,DP9:8,DP10:9,DP11:10,DP12:11,DP13:12};function l(e,t,o){a[e]=new THREE.Path,a[e].moveTo(t.x,t.y);for(var i=0;i<o.length;i++)a[e].lineTo(o[i].x,o[i].y);new THREE.Line;return function(e){for(var t=[],o=void 0,i=e<30?n.default.red:n.default.blue,s=0;s<a[e].curves.length;s++)o=new THREE.Vector3(a[e].curves[s].v1.x,a[e].curves[s].v1.y,0),t[s]=new THREE.Vector3(o.x,o.y,0);o=new THREE.Vector3(a[e].curves[a[e].curves.length-1].v2.x,a[e].curves[a[e].curves.length-1].v2.y,0),t[a[e].curves.length]=new THREE.Vector3(o.x,o.y,0);var r=new THREE.Geometry;r.vertices=t;var c=new THREE.LineDashedMaterial({linewidth:1,color:i,dashSize:3,gapSize:3});return new THREE.Line(r,c)}(e)}t.createPaths=function(){var e=[],t=void 0,o=[],n=0;i[c.DP1]=new THREE.Vector3(-160,-165,0),i[c.DP2]=new THREE.Vector3(-160,25,0),i[c.DP3]=new THREE.Vector3(-120,-165,0),i[c.DP4]=new THREE.Vector3(-55,-165,0),i[c.DP5]=new THREE.Vector3(-40,25,0),i[c.DP6]=new THREE.Vector3(100,-165,0),i[c.DP7]=new THREE.Vector3(100,25,0),i[c.DP8]=new THREE.Vector3(-40,25,0),i[c.DP9]=new THREE.Vector3(-160,178,0),i[c.DP10]=new THREE.Vector3(-10,240,0),i[c.DP11]=new THREE.Vector3(-5,178,0),i[c.DP12]=new THREE.Vector3(150,-10,0),i[c.DP13]=new THREE.Vector3(-55,178,0),t=new THREE.Vector3(-155,-240,0),e[0]=new THREE.Vector3(-155,-170,0),o[n]=new THREE.Line,o[n]=l(0,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-155,25,0),o[n++]=new THREE.Line,o[n]=l(1,t,e),t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-155,178,0),o[n++]=new THREE.Line,o[n]=l(2,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-120,-170,0),o[n++]=new THREE.Line,o[n]=l(3,t,e),e=[],t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-150,25,0),e[1]=new THREE.Vector3(-150,40,0),e[2]=new THREE.Vector3(-55,40,0),o[n++]=new THREE.Line,o[n]=l(4,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-110,-160,0),e[1]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=l(5,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=l(6,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(110,-170,0),o[n++]=new THREE.Line,o[n]=l(7,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(-30,-170,0),e[1]=new THREE.Vector3(-30,25,0),o[n++]=new THREE.Line,o[n]=l(8,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(-10,25,0),e[2]=new THREE.Vector3(-10,178,0),o[n++]=new THREE.Line,o[n]=l(9,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(110,25,0),o[n++]=new THREE.Line,o[n]=l(10,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=l(11,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(150,25,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=l(12,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(135,-170,0),e[1]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(13,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(150,-170,0),e[1]=new THREE.Vector3(150,-15,0),o[n++]=new THREE.Line,o[n]=l(14,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-55,178,0),o[n++]=new THREE.Line,o[n]=l(15,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-160,240,0),e[1]=new THREE.Vector3(-5,240,0),o[n++]=new THREE.Line,o[n]=l(16,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=l(17,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(0,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(18,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(19,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(-5,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=l(20,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(150,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(21,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(135,-20,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(22,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=l(23,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(-55,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=l(24,t,e),e=[],t=new THREE.Vector3(250,210,0),e[0]=new THREE.Vector3(185,210,0),e[1]=new THREE.Vector3(185,-165,0),e[2]=new THREE.Vector3(115,-165,0),e[3]=new THREE.Vector3(115,60,0),e[4]=new THREE.Vector3(0,60,0),e[5]=new THREE.Vector3(-10,40,0),e[6]=new THREE.Vector3(-165,40,0),e[7]=new THREE.Vector3(-165,188,0),e[8]=new THREE.Vector3(-45,188,0),e[9]=new THREE.Vector3(-45,40,0),e[10]=new THREE.Vector3(125,40,0),e[11]=new THREE.Vector3(125,188,0),e[12]=new THREE.Vector3(250,188,0),o[n++]=new THREE.Line,o[n]=l(s.redCar,t,e),e=[],t=new THREE.Vector3(-250,-160,0),e[0]=new THREE.Vector3(128,-160,0),e[1]=new THREE.Vector3(128,210,0),e[2]=new THREE.Vector3(-185,210,0),e[3]=new THREE.Vector3(-185,-250,0),o[n++]=new THREE.Line,o[n]=l(s.blueCar,t,e);var a=10*Math.random();return e=[],t=new THREE.Vector3(160-a,-130,0),e[0]=new THREE.Vector3(160-a,170,0),e[1]=new THREE.Vector3(159-a,170,0),e[2]=new THREE.Vector3(159-a,-130,0),e[3]=new THREE.Vector3(160-a,-130,0),o[n++]=new THREE.Line,o[n]=l(r.boy1,t,e),e=[],t=new THREE.Vector3(-150,245-a,0),e[0]=new THREE.Vector3(220,245-a,0),e[1]=new THREE.Vector3(220,244-a,0),e[2]=new THREE.Vector3(-150,244-a,0),e[3]=new THREE.Vector3(-150,245-a,0),o[n++]=new THREE.Line,o[n]=l(r.robot1,t,e),o},t.getDP=function(e){return e>=1&&e<=c.DP13?i[e-1]:null},t.pathList=a,t.CarSegments=s,t.PedSegments=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createBike=function(){t.bike=n=new THREE.Object3D,n.mesh=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.JSONLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,n.back_wheel=e,n.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,n.mesh.add(e),n.front_wheel=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),n.mesh.add(e)})}),o.load("./assets/low-poly-cycle.json",function(e,t){t.forEach(function(e){e.skinning=!0}),n.rider=new THREE.SkinnedMesh(e,t),n.rider.scale.set(8,8,8),n.rider.position.set(0,-19,-10),n.rider.rotation.y=Math.PI,n.rider.rotation.x=Math.PI/2,n.mesh.add(n.rider),n.mixer=new THREE.AnimationMixer(n.rider),n.anim=n.mixer.clipAction(e.animations[1]),n.anim.setEffectiveWeight(1),n.anim.enabled=!0,n.anim.play(),n.anim.paused=!0,n.anim.timeScale=2,n.anim.paused=!1}),n.mesh.wide=1,n.mesh.long=3,n.mesh.position.z=2.2,n.mesh.scale.set(.2,.2,.2),n.mesh.tripod=new THREE.Object3D,n.mesh.add(n.mesh.tripod),n.mesh.tripod.position.set(0,2,25)},t.bike=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createLight=function(e){var t,o;n=new THREE.HemisphereLight(11184810,0,4),t=new THREE.AmbientLight(1118481,6),o=new THREE.DirectionalLight(16777215,.9),e.add(n),e.add(o),e.add(t)},t.setHLIntensity=function(e){n.intensity=e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,i=void 0,s=null,r=null;function c(e,t,o){return e.mixer=new THREE.AnimationMixer(e),e.anim=e.mixer.clipAction(t),e.anim.setEffectiveWeight(1),e.anim.enabled=!0,e.anim.play(),e.anim.timeScale=o,e.anim.paused=!1,e}t.createTown=function(){t.town=n=new THREE.Object3D,t.cars=i=new THREE.Object3D,t.pedestrians=r=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.ColladaLoader;e.setTexturePath("assets/"),e.load("assets/road-design.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/road-design.obj",function(e){e.scale.set(24,24,24),e.rotation.x=Math.PI/2,n.add(e)})}),e.setTexturePath("assets/"),e.load("assets/houses-layout41.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/houses-layout41.obj",function(e){e.scale.set(2,2,2),e.rotation.x=Math.PI/2,n.add(e)})}),e.load("assets/dp1-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp1-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,-165,-1),n.dp1Arrows=e;var t=e.clone();t.position.set(-160,25,-1),n.dp2Arrows=t,n.add(e),n.add(t)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp12-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp12-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(140,-10,-1),n.dp12Arrows=e,n.add(e)})}),e.load("assets/dp13-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp13-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,178,-1),n.dp13Arrows=e,n.add(e)})}),e.load("assets/dp3-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp3-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-120,-170,-1),n.dp3Arrows=e,n.add(e)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp9-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp9-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,178,-1),n.dp9Arrows=e;var t=e.clone();t.position.set(-5,178,-1),n.dp11Arrows=t;var o=e.clone();o.position.set(-40,25,-1),n.dp5Arrows=o,n.add(e),n.add(t),n.add(o)})}),e.load("assets/dp4-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp4-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,-165,-1),n.dp4Arrows=e;var t=e.clone();t.position.set(100,25,-1),n.dp7Arrows=t;var o=e.clone();o.position.set(100,-165,-1),n.dp6Arrows=o;var a=e.clone();a.position.set(-60,35,-1),n.dp8Arrows=a,n.add(e),n.add(t),n.add(o),n.add(a)})}),e.load("assets/start.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/start.obj",function(e){e.scale.set(20,20,10),e.rotation.x=0,e.rotation.y=-Math.PI/2,e.rotation.z=-Math.PI/2,e.position.set(-190,-250,1),n.add(e)})}),e.load("assets/finish-line.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/finish-line.obj",function(e){e.scale.set(10,10,10),e.rotation.x=0,e.rotation.y=-Math.PI/2,e.rotation.z=-Math.PI/2,e.position.set(240,200,1),n.add(e)})}),e.load("assets/one-way.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/one-way.obj",function(e){e.scale.set(8,8,8),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(-110,35,0);var t=e.clone();t.position.set(-40,-60,.5),t.rotation.y=-Math.PI/2,n.add(e),n.add(t)})}),o.load("assets/car-low-poly6.dae",function(e){(s=e.scene).scale.set(3,3,3),s.traverse(function(e){if(e instanceof THREE.SkinnedMesh){t.parkedCarDoor=a=e,a.bone=e.skeleton.bones[0];var o=new THREE.CubeGeometry(.5,4,5,1,1,1,1),n=new THREE.MeshBasicMaterial({color:65280,wireframe:!0}),i=new THREE.Mesh(o,n);i.position.set(-110,-172,3),i.long=.5,i.wide=1,a.doorCollider=i}e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),s.updateMatrix(),s.rotation.z=Math.PI/2,s.rotation.x=0,s.position.set(-110,-175,0),n.add(s)}),e.setTexturePath("assets/"),e.load("assets/yellow2.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/yellow2.obj",function(e){e.scale.set(5,5,5),i.yellowCar=e,i.yellowCar.rotation.x=Math.PI/2,i.yellowCar.rotation.y=Math.PI,i.yellowCar.rotation.z=0,i.yellowCar.position.set(-4,100,0),n.add(e)})}),o.load("assets/car-low-red.dae",function(e){i.redCar=e.scene,i.redCar.scale.x=i.redCar.scale.y=i.redCar.scale.z=5,i.redCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.redCar.updateMatrix(),i.redCar.rotation.y=Math.PI,i.redCar.rotation.z=0,i.redCar.position.set(250,250,0),i.redCar.long=8,i.redCar.wide=6,n.add(i.redCar)}),o.load("assets/car-low-blue.dae",function(e){i.blueCar=e.scene,i.blueCar.scale.x=i.blueCar.scale.y=i.blueCar.scale.z=5,i.blueCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.blueCar.updateMatrix(),i.blueCar.rotation.y=Math.PI,i.blueCar.rotation.z=0,i.blueCar.position.set(250,250,0),i.blueCar.long=8,i.blueCar.wide=6,n.add(i.blueCar)}),function(){var e=new THREE.JSONLoader;e.load("./assets/dooring.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(2,2,2),o.position.set(-110,-180,0),o.rotation.x=Math.PI/2,o.rotation.y=-Math.PI,n.add(o),n.billBoard=c(o,e.animations[1],.5)}),e.load("./assets/low-poly-boy-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(160,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingBoy=c(o,e.animations[0],2);var a=o.clone();a.position.set(-115,-110,0),a.rotation.y=-Math.PI,a.wide=2,a.long=2,n.add(a),r.walkingBoy1=c(a,e.animations[0],.12)}),e.load("./assets/low-poly-girl-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(155,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingGirl=c(o,e.animations[0],2)}),e.load("./assets/robot-rig3.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,240,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot=c(o,e.animations[3],1)}),e.load("./assets/robot-rig4.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,245,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot1=c(o,e.animations[3],1.2)})}()},t.town=n,t.parkedCarDoor=a,t.cars=i,t.pedestrians=r},function(e,t,o){"use strict";!function(e){e&&e.__esModule}(o(8))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.init=S;var n=m(o(9)),a=o(10),i=o(2),s=m(o(3)),r=o(11),c=o(4),l=o(6),d=o(1),p=o(5);function m(e){return e&&e.__esModule?e:{default:e}}var u=void 0,w=void 0,E=0,h=0,C=0,b=new THREEx.KeyboardState,T=.1,f=.05,g=null,R=!1,v=new THREE.Clock,H=null,y=null,k=!1,P=!1,x=!0,M=!0,V=0;function A(e,t){return e.position.x<t.position.x+t.wide&&e.position.x+e.wide>t.position.x&&e.position.y<t.position.y+t.long&&e.long+e.position.y>t.position.y}function L(){BootstrapDialog.show({title:"Game Over!",message:"Ready to Restart the Game?",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Game",action:function(e){location.reload(),R=!1,e.close(),R=!1}},{label:"Leave Game",action:function(e){cancelAnimationFrame(g),e.close(),R=!0}}]}),R=!0}function B(e,t){if(null!==t){E+=.0015*T;var o=i.pathList[e].getPoint(E);if(null!==o){if(e===i.CarSegments.blueCar){if(V>0&&V<80)return void V++;if(V>=80&&(V=0),o.x+60<1&&o.x+60>0&&-165===o.y)return void(V=1)}t.position.x=o.x,t.position.y=o.y;var n=new THREE.Vector3(0,0,1),a=D(e,E);a=a>0?-Math.PI+a:Math.PI+a,t.quaternion.setFromAxisAngle(n,a)}else E=0}}function D(e,t){var o=i.pathList[e].getTangent(t).normalize();return-Math.atan(o.x/o.y)}function I(){if(!0!==R){var e=r.activeSegment;B(i.CarSegments.redCar,l.cars.redCar),B(i.CarSegments.blueCar,l.cars.blueCar),function(e){var t=new THREE.Vector3;if(null!==i.pathList){var o=(0,r.getPosition)();o+=.002*(0,r.getBikeSpeed)(),(0,r.setPosition)(o);var n=i.pathList[e].getPoint((0,r.getPosition)());if(null!==n&&null!==c.bike&&null!==c.bike.mesh){H.destroy(),y.destroy(),c.bike.mesh.position.x=n.x,c.bike.mesh.position.y=n.y,t.setFromMatrixPosition(c.bike.mesh.tripod.matrixWorld),d.inspectCamera.position.lerp(t,.2),d.inspectCamera.lookAt(c.bike.mesh.position);var a=D(e,(0,r.getPosition)());a>0&&(a=-Math.PI+a);var s=new THREE.Vector3(0,0,1);c.bike.mesh.quaternion.setFromAxisAngle(s,a),c.bike.mesh.children.length>4&&(c.bike.front_wheel.rotation.x-=.1,c.bike.back_wheel.rotation.x-=.1)}}}(e),function(){var e=i.PedSegments.boy1,t=i.PedSegments.robot1;if(null!==l.pedestrians){h+=.002*f,C+=.005*f;var o=i.pathList[e].getPoint(h),n=i.pathList[t].getPoint(C);if(null!==o)if(null!==n){var a=l.pedestrians.walkingBoy.position.y,s=l.pedestrians.runningRobot.position.x;0!=a&&(a>o.y&&!1===k?(l.pedestrians.walkingBoy.rotation.y=0,l.pedestrians.walkingGirl.rotation.y=0,k=!0,x=!1):a<o.y&&!1===x&&(l.pedestrians.walkingBoy.rotation.y=Math.PI,l.pedestrians.walkingGirl.rotation.y=Math.PI,k=!1,x=!0)),0!=s&&(s>n.x&&!1===P?(l.pedestrians.runningRobot.rotation.y=3*Math.PI/2,l.pedestrians.runningRobot1.rotation.y=3*Math.PI/2,P=!0,M=!1):s<n.x&&!1===M&&(l.pedestrians.runningRobot.rotation.y=Math.PI/2,l.pedestrians.runningRobot1.rotation.y=Math.PI/2,P=!1,M=!0)),l.pedestrians.walkingBoy.position.x=o.x,l.pedestrians.walkingGirl.position.x=o.x-5,l.pedestrians.walkingBoy.position.y=l.pedestrians.walkingGirl.position.y=o.y,l.pedestrians.runningRobot.position.x=n.x,l.pedestrians.runningRobot1.position.x=n.x,l.pedestrians.runningRobot.position.y=n.y,l.pedestrians.runningRobot1.position.y=n.y-5}else C=0;else h=0}}(),function(e){!0===A(c.bike.mesh,l.cars.redCar)&&(console.log("Hit Red Car!"),L()),!0===A(c.bike.mesh,l.cars.blueCar)&&(console.log("Hit Blue Car!"),L()),!0===A(c.bike.mesh,l.pedestrians.walkingBoy)&&(console.log("Hit Boy!"),L()),!0===A(c.bike.mesh,l.pedestrians.walkingGirl)&&(console.log("Hit Girl!"),L()),!0===A(c.bike.mesh,l.pedestrians.runningRobot)&&(console.log("Hit Running Robot!"),L()),!0===A(c.bike.mesh,l.pedestrians.runningRobot1)&&(console.log("Hit Running Robot1!"),L()),null!==l.parkedCarDoor&&(6===e?(Math.random()<.0025&&(l.parkedCarDoor.bone.rotation.z=-1.5,l.parkedCarDoor.doorCollider.position.y=-170),A(c.bike.mesh,l.parkedCarDoor.doorCollider)&&(console.log("Hit Car Door!"),L())):(l.parkedCarDoor.bone.rotation.z=0,l.parkedCarDoor.doorCollider.position.y=-172))}(e),g=requestAnimationFrame(I),function(){d.orbitControls.hcontrols.update(),d.orbitControls.tcontrols.update(),b.pressed("1")&&(0,d.setActiveCamera)(d.hoveringCamera),b.pressed("2")&&(0,d.setActiveCamera)(d.trailingCamera);var e=(0,d.getActiveCamera)();e&&u.render(w,e);var t=v.getDelta();c.bike.mixer&&c.bike.mixer.update(t),l.town.billBoard&&l.town.billBoard.mixer&&l.town.billBoard.mixer.update(t),l.pedestrians.walkingBoy&&l.pedestrians.walkingBoy.mixer&&l.pedestrians.walkingBoy.mixer.update(t),l.pedestrians.walkingBoy1&&l.pedestrians.walkingBoy1.mixer&&l.pedestrians.walkingBoy1.mixer.update(t),l.pedestrians.walkingGirl&&l.pedestrians.walkingGirl.mixer&&l.pedestrians.walkingGirl.mixer.update(t),l.pedestrians.runningRobot&&l.pedestrians.runningRobot.mixer&&l.pedestrians.runningRobot.mixer.update(t),l.pedestrians.runningRobot1&&l.pedestrians.runningRobot1.mixer&&l.pedestrians.runningRobot1.mixer.update(t)}()}}function S(){!function(){var e=window.innerHeight,t=window.innerWidth;(w=new THREE.Scene).fog=new THREE.Fog(s.default.white,100,1e3),w.add((0,n.default)(100)),w.rotation.z+=Math.PI/2,w.rotation.x-=Math.PI/2,(u=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(t,e),u.shadowMap.enabled=!0,u.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(u.domElement),H=lottie.loadAnimation({container:document.getElementById("logo"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_rs.json"}),y=lottie.loadAnimation({container:document.getElementById("bike"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_bike.json"}),(0,a.infoButton)(),(0,a.selectCameraView)()}(),(0,d.createCameras)(w,u,c.bike),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),o=new THREE.Mesh(t,e),n=new THREE.Object3D;n.add(o),w.add(n)}(),(0,p.createLight)(w),(0,l.createTown)(),w.add(l.town),(0,c.createBike)(),w.add(c.bike.mesh),c.bike.mesh.add(d.trailingCamera),(0,d.setActiveCamera)(d.trailingCamera);var t;t=(0,i.createPaths)();for(var o=0;o<t.length;o++)w.add(t[o]);!function(){var t=e('<div class="welcomeDialog"></div>');t.append('<img src="./images/gameLayout.png" />'),t.append('<video controls width="500" autoplay="true">           <source src="./images/sampleRide.mp4" type="video/mp4">           <source src="./images/sampleScene.png">           Sorry, your browser doesn\'t support embedded videos.           </video>'),t.append("<p> In this level, the user is prompted to choose alternate paths for the cyclist.                         The objective of the game to \n make it to the end without a crash.</p>"),t.append('<div class="row">                           <div class="border col-md-6 boxlayout">                              <ul> Sample Interactions:                                <li> Cyclist stops at intersection. The user has to decide between going straight or turning right.</li>                                <li> Cyclist can and SHOULD check surrounding traffic before deciding on the next move. </li>                                <li> Cyclist can check the View from Behind, Right Side and/or Left Side.</li>                               <li> If the Cyclist does not make a choice when COUNTDOWN reaches 0, A random choice is done.</li>                              </ul>                           </div>                           <div class="border col-md-6 boxlayout">                             <ul> Controls:                               <li> To Choose the Top Hovering Camera, Press 1 (Mobile: Red Camera Icon)</li>                               <li> To Choose the Trailing Camera, Press 2 (Mobile: Black Camera Icon)</li>                               <li> To Zoom in and Out, use middle mouse wheel(Mobile TBD)</li>                               <li> To Rotate around the Z axis, use left mouse button(Mobile TBD)</li>                               <li> To move the TOP Camera around, use right mouse button (Mobile: screen touch)</li>                             </ul>                           </div>                         </div>'),BootstrapDialog.show({title:"Ride Safely Interactive",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Start Game",action:function(e){e.close(),I()}},{label:"Quit Game",action:function(e){e.close()}}]})}(),R=!1}window.addEventListener("load",S,!1)}).call(this,o(0))},function(e,t,o){"use strict";function n(e,t,o,n){var a=new THREE.Geometry,i=void 0;i=n?new THREE.LineDashedMaterial({color:o,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:o}),a.vertices.push(e.clone()),a.vertices.push(t.clone());var s=new THREE.Line(a,i,THREE.LineSegments);return s.computeLineDistances(),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.selectCameraView=t.infoButton=void 0;var n=o(1);t.infoButton=function(){e("#infoButton").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",position:"fixed",title:"Place Holder for More Game Info."}).append("<img width='42' height='42' src='images/infoButton.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#infoButton").on("click",function(){e(this).tooltip("enable").tooltip("open")})},t.selectCameraView=function(){e("#topCamera").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",title:"Click Me for Top Camera View."}).append("<img width='42' height='42' src='images/camera-icon-red.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#topCamera").on("click",function(){(0,n.setActiveCamera)(n.hoveringCamera)}),e("#topCamera").hover(function(){e(this).append(e("<span class='cameraDisplay'> Click Me for Top Camera View!</span>"))},function(){e(this).find("span:last").remove()}),e("#chaseCamera").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",title:"Click Me for Trailing Camera View."}).append("<img width='42' height='42' src='images/camera-icon.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#chaseCamera").on("click",function(){(0,n.setActiveCamera)(n.trailingCamera)}),e("#chaseCamera").hover(function(){e(this).append(e("<span class='cameraDisplay'> Click Me for Trailing Camera View!</span>"))},function(){e(this).find("span:last").remove()})}}).call(this,o(0))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.getBikeSpeed=t.resetPosition=t.resetSegment=t.activeSegment=void 0;var n=o(2),a=o(4),i=o(1),s=o(5),r=o(6),c=2e3,l=0,d=0,p=2,m=500,u=null,w=2e4,E=null;function h(){d=0}function C(e){p=e}function b(){(0,i.setActiveCamera)(i.trailingCamera),null}function T(){if(null,null!==n.pathList&&null!==l)if(null===n.pathList[l].getPoint(d))switch(C(1),(0,s.setHLIntensity)(6),a.bike.anim.paused=!0,(0,i.setActiveCamera)(i.trailingCamera),l){case 0:!function(){u=setTimeout(f,w,1,3,r.town.dp1Arrows,null,10);var t=e("<div </div>"),o=R(w/1e3);t.append('<img src="./images/right.png" />'),t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp1Arrows.position.z=1;BootstrapDialog.show({title:"DP-1: Limited Time to make a choice",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){g(1,e,null,r.town.dp1Arrows,o)}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){g(3,e,10,r.town.dp1Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=0,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 1:!function(){u=setTimeout(f,w,2,4,r.town.dp2Arrows,2,2);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp2Arrows.position.z=1,BootstrapDialog.show({title:"DP-2: Limited seconds to choose a direction",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){g(2,e,2,r.town.dp2Arrows,o)}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){g(4,e,2,r.town.dp2Arrows,o)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=0,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 3:!function(){u=setTimeout(f,w,6,5,r.town.dp3Arrows,null,null);var t=e('<div class="decisionPoint"></div>');t.append("Caution: potential car door opening! <br />");var o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp3Arrows.position.z=1,BootstrapDialog.show({title:"DP-3: Limited seconds to choose a direction!",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-danger",action:function(e){g(6,e,null,r.town.dp3Arrows,o)}},{label:"Steer Away",cssClass:"btn-primary",action:function(e){g(5,e,null,r.town.dp3Arrows,o)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 4:!function(){u=setTimeout(f,w,9,10,r.town.dp8Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp8Arrows.position.z=1,BootstrapDialog.show({title:"DP-8: Don't take chances! Limited Seconds to choose next path!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){g(9,e,null,r.town.dp8Arrows,o)}},{label:"Continue Straight to Sidewalk",cssClass:"btn-danger",action:function(e){g(10,e,null,r.town.dp8Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 8:!function(){u=setTimeout(f,w,10,9,r.town.dp5Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp5Arrows.position.z=1,BootstrapDialog.show({title:"DP-5: Don't Tempt Drivers!! Limited seconds to choose a direction!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Right",cssClass:"btn-primary",action:function(e){g(10,e,null,r.town.dp5Arrows,o)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){g(9,e,null,r.town.dp5Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=0,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 5:case 6:!function(){u=setTimeout(f,w,8,7,r.town.dp4Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp4Arrows.position.z=1,BootstrapDialog.show({title:"DP-4: Safe Riding: Limited seconds to choose a direction!",cssClass:"decisionPoint2",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){g(8,e,null,r.town.dp4Arrows,o)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){g(7,e,null,r.town.dp4Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Back",cssClass:"btn-info",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 7:!function(){u=setTimeout(f,w,13,14,r.town.dp6Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp6Arrows.position.z=1,BootstrapDialog.show({title:"DP-6: Don't take chances: Limited seconds to choose a direction",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){g(13,e,null,r.town.dp6Arrows,o)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){g(14,e,null,r.town.dp6Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 10:!function(){u=setTimeout(f,w,11,12,r.town.dp7Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp7Arrows.position.z=1,BootstrapDialog.show({title:"DP-7: Don't take chances! Limited Seconds to choose next path!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){g(11,e,null,r.town.dp7Arrows,o)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){g(12,e,null,r.town.dp7Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 2:!function(){u=setTimeout(f,w,15,16,r.town.dp9Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp9Arrows.position.z=1,BootstrapDialog.show({title:"DP-9: Heavy Traffic Alert!! Limited Seconds to choose next Path!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Road",cssClass:"btn-primary",action:function(e){g(15,e,null,r.town.dp9Arrows,o)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){g(16,e,null,r.town.dp9Arrows,o)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=0,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 9:!function(){u=setTimeout(f,w,19,20,r.town.dp11Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp11Arrows.position.z=1,BootstrapDialog.show({title:"DP-11: Pedestrians Alert!! Limited Seconds to choose a path!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){g(19,e,null,r.town.dp11Arrows,o)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){g(20,e,null,r.town.dp11Arrows,o)}},{label:"Look Left",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Right",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=0,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 15:!function(){u=setTimeout(f,w,23,24,r.town.dp13Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp13Arrows.position.z=1,BootstrapDialog.show({title:"DP-13: Pedestrians Alert/Traffic Alert! Limited Seconds to choose next path!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){g(23,e,null,r.town.dp13Arrows,o)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){g(24,e,null,r.town.dp13Arrows,o)}},{label:"Look Right",cssClass:"btn-success",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 14:!function(){u=setTimeout(f,w,21,22,r.town.dp12Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp12Arrows.position.z=1,BootstrapDialog.show({title:"DP-12: Heavy Traffic Alert! Limited Seconds to choose a direction!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){g(21,e,null,r.town.dp12Arrows,o)}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){g(22,e,null,r.town.dp12Arrows,o)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI/2,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 16:!function(){u=setTimeout(f,w,17,18,r.town.dp10Arrows,null,null);var t=e('<div class="decisionPoint"></div>'),o=R(w/1e3);t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),l,r.town.dp10Arrows.position.z=1,BootstrapDialog.show({title:"DP-10: Pedestrians Alert! Heavy Traffic Alert!: Limited Seconds to choose a direction!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){g(17,e,null,r.town.dp10Arrows,o)}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){g(18,e,null,r.town.dp10Arrows,o)}},{label:"Look Back",cssClass:"btn-warning",action:function(e){(0,i.setActiveCamera)(i.inspectCamera);var t=new THREE.Vector3;t.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),i.inspectCamera.position.lerp(t,.2),i.inspectCamera.lookAt(a.bike.mesh.position),i.inspectCamera.rotation.x=0,i.inspectCamera.rotation.y=-Math.PI,i.inspectCamera.rotation.z=0,setTimeout(b,m)}}]})}();break;case 11:case 12:case 13:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:default:!function(){var t=e('<div class="decisionPoint"></div>');l,BootstrapDialog.show({title:"Successful Completion!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Cycling Journey",cssClass:"btn-success",action:function(e){g(0,e)}},{label:"Leave Game",cssClass:"btn-danger",action:function(e){e.close()}}]})}()}else setTimeout(T,c)}function f(t,o,n,a,i){Math.random()<=.5?g(t,null,a,n):g(o,null,i,n),e.each(BootstrapDialog.dialogs,function(e,t){t.close()})}function g(e,o,n,r,d){t.activeSegment=l=e,h(),o&&o.close(),setTimeout(T,c),u&&(clearTimeout(u),u=null),n&&C(n),r&&(r.position.z=-1),d&&clearInterval(d),a.bike.anim.paused=!1,(0,i.setActiveCamera)(i.trailingCamera),(0,s.setHLIntensity)(4)}function R(t){return E=setInterval(function(){t<=6?e(".display_cnt").html("<font color='red'>"+--t+"</font>"):e(".display_cnt").html(--t),t<=0&&(clearInterval(E),E=null)},1e3)}null!==n.pathList&&setTimeout(T,c),t.activeSegment=l,t.resetSegment=function(){t.activeSegment=l=0},t.resetPosition=h,t.getBikeSpeed=function(){return p},t.getPosition=function(){return d},t.setPosition=function(e){d=e}}).call(this,o(0))}]);
//# sourceMappingURL=app.bundle.js.map