!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=8)}([function(e,t){e.exports=jQuery},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,s=null,i=null,r=null;t.createCameras=function(e,o){var l=window.innerWidth/window.innerHeight;t.orbitControls=i=new THREE.Object3D,t.trailingCamera=a=new THREE.PerspectiveCamera(45,l,1,1e3),a.position.set(0,-250,50),n=a,i.tcontrols=new THREE.OrbitControls(a,o.domElement),i.tcontrols.maxPolarAngle=Math.PI,i.tcontrols.minPolarAngle=2.4,i.tcontrols.maxAzimuthAngle=Math.PI/6,i.tcontrols.minAzimuthAngle=-Math.PI/6,i.tcontrols.minDistance=50,i.tcontrols.maxDistance=250,i.tcontrols.enableDamping=!0,i.tcontrols.dampingFactor=.25,i.tcontrols.enableZoom=!0,i.tcontrols.update(),t.hoveringCamera=s=new THREE.PerspectiveCamera(45,l,1,1e3),s.position.set(0,350,450),s.lookAt(e.position),i.hcontrols=new THREE.OrbitControls(s,o.domElement),i.hcontrols.maxPolarAngle=1.4,i.hcontrols.minPolarAngle=Math.PI/4,i.hcontrols.maxAzimuthAngle=Math.PI/2,i.hcontrols.minAzimuthAngle=-Math.PI/2,i.hcontrols.minDistance=50,i.hcontrols.maxDistance=400,i.hcontrols.enableDamping=!0,i.hcontrols.dampingFactor=.25,i.hcontrols.enableZoom=!0,i.hcontrols.update(),t.inspectCamera=r=new THREE.PerspectiveCamera(35,l,.1,1e3),r.position.set(0,2,25)},t.getActiveCamera=function(){return n},t.setActiveCamera=function(e){n=e},t.hoveringCamera=s,t.trailingCamera=a,t.orbitControls=i,t.inspectCamera=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PedSegments=t.CarSegments=t.pathList=t.getDP=t.createPaths=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(o(3));var a=[],s=[],i={redCar:31,blueCar:32,yellowCar:33,yellowCar1:34,greenCar:35},r={boy1:41,robot1:42},l={DP1:0,DP2:1,DP3:2,DP4:3,DP5:4,DP6:5,DP7:6,DP8:7,DP9:8,DP10:9,DP11:10,DP12:11,DP13:12};function c(e,t,o){a[e]=new THREE.Path,a[e].moveTo(t.x,t.y);for(var s=0;s<o.length;s++)a[e].lineTo(o[s].x,o[s].y);new THREE.Line;return function(e){for(var t=[],o=void 0,s=e<30?n.default.red:n.default.blue,i=0;i<a[e].curves.length;i++)o=new THREE.Vector3(a[e].curves[i].v1.x,a[e].curves[i].v1.y,0),t[i]=new THREE.Vector3(o.x,o.y,0);o=new THREE.Vector3(a[e].curves[a[e].curves.length-1].v2.x,a[e].curves[a[e].curves.length-1].v2.y,0),t[a[e].curves.length]=new THREE.Vector3(o.x,o.y,0);var r=new THREE.Geometry;r.vertices=t;var l=new THREE.LineDashedMaterial({linewidth:1,color:s,dashSize:3,gapSize:3});return new THREE.Line(r,l)}(e)}t.createPaths=function(){var e=[],t=void 0,o=[],n=0;s[l.DP1]=new THREE.Vector3(-160,-165,0),s[l.DP2]=new THREE.Vector3(-160,25,0),s[l.DP3]=new THREE.Vector3(-120,-165,0),s[l.DP4]=new THREE.Vector3(-55,-165,0),s[l.DP5]=new THREE.Vector3(-40,25,0),s[l.DP6]=new THREE.Vector3(100,-165,0),s[l.DP7]=new THREE.Vector3(100,25,0),s[l.DP8]=new THREE.Vector3(-40,25,0),s[l.DP9]=new THREE.Vector3(-160,178,0),s[l.DP10]=new THREE.Vector3(-10,240,0),s[l.DP11]=new THREE.Vector3(-5,178,0),s[l.DP12]=new THREE.Vector3(150,-10,0),s[l.DP13]=new THREE.Vector3(-55,178,0),t=new THREE.Vector3(-155,-240,0),e[0]=new THREE.Vector3(-155,-170,0),o[n]=new THREE.Line,o[n]=c(0,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-155,25,0),o[n++]=new THREE.Line,o[n]=c(1,t,e),t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-155,178,0),o[n++]=new THREE.Line,o[n]=c(2,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-120,-170,0),o[n++]=new THREE.Line,o[n]=c(3,t,e),e=[],t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-150,25,0),e[1]=new THREE.Vector3(-150,40,0),e[2]=new THREE.Vector3(-55,40,0),o[n++]=new THREE.Line,o[n]=c(4,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-110,-160,0),e[1]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=c(5,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=c(6,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(110,-170,0),o[n++]=new THREE.Line,o[n]=c(7,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(-25,-170,0),e[1]=new THREE.Vector3(-25,25,0),o[n++]=new THREE.Line,o[n]=c(8,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(-10,25,0),e[2]=new THREE.Vector3(-10,178,0),o[n++]=new THREE.Line,o[n]=c(9,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(110,25,0),o[n++]=new THREE.Line,o[n]=c(10,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=c(11,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(150,25,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=c(12,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(135,-170,0),e[1]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(13,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(150,-170,0),e[1]=new THREE.Vector3(150,-15,0),o[n++]=new THREE.Line,o[n]=c(14,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-55,178,0),o[n++]=new THREE.Line,o[n]=c(15,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-160,240,0),e[1]=new THREE.Vector3(-5,240,0),o[n++]=new THREE.Line,o[n]=c(16,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(17,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(0,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(18,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(19,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(-5,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(20,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(150,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(21,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(135,-20,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(22,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(23,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(-55,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(24,t,e),e=[],t=new THREE.Vector3(250,210,0),e[0]=new THREE.Vector3(185,210,0),e[1]=new THREE.Vector3(185,-165,0),e[2]=new THREE.Vector3(115,-165,0),e[3]=new THREE.Vector3(115,60,0),e[4]=new THREE.Vector3(0,60,0),e[5]=new THREE.Vector3(-10,40,0),e[6]=new THREE.Vector3(-165,40,0),e[7]=new THREE.Vector3(-165,188,0),e[8]=new THREE.Vector3(-45,188,0),e[9]=new THREE.Vector3(-45,40,0),e[10]=new THREE.Vector3(125,40,0),e[11]=new THREE.Vector3(125,188,0),e[12]=new THREE.Vector3(250,188,0),o[n++]=new THREE.Line,o[n]=c(i.redCar,t,e),e=[],t=new THREE.Vector3(-250,-160,0),e[0]=new THREE.Vector3(128,-160,0),e[1]=new THREE.Vector3(128,210,0),e[2]=new THREE.Vector3(-185,210,0),e[3]=new THREE.Vector3(-185,-250,0),o[n++]=new THREE.Line,o[n]=c(i.blueCar,t,e),e=[],t=new THREE.Vector3(-250,-160,0),e[0]=new THREE.Vector3(-30,-160,0),e[1]=new THREE.Vector3(-30,40,0),e[2]=new THREE.Vector3(-40,40,0),e[3]=new THREE.Vector3(-165,40,0),e[4]=new THREE.Vector3(-165,250,0),o[n++]=new THREE.Line,o[n]=c(i.yellowCar1,t,e),e=[],t=new THREE.Vector3(-30,-250,0),e[0]=new THREE.Vector3(-30,25,0),e[1]=new THREE.Vector3(-20,210,0),e[2]=new THREE.Vector3(-200,210,0),o[n++]=new THREE.Line,o[n]=c(i.greenCar,t,e);var a=10*Math.random();return e=[],t=new THREE.Vector3(160-a,-130,0),e[0]=new THREE.Vector3(160-a,170,0),e[1]=new THREE.Vector3(159-a,170,0),e[2]=new THREE.Vector3(159-a,-130,0),e[3]=new THREE.Vector3(160-a,-130,0),o[n++]=new THREE.Line,o[n]=c(r.boy1,t,e),e=[],t=new THREE.Vector3(-150,245-a,0),e[0]=new THREE.Vector3(220,245-a,0),e[1]=new THREE.Vector3(220,244-a,0),e[2]=new THREE.Vector3(-150,244-a,0),e[3]=new THREE.Vector3(-150,245-a,0),o[n++]=new THREE.Line,o[n]=c(r.robot1,t,e),o},t.getDP=function(e){return e>=1&&e<=l.DP13?s[e-1]:null},t.pathList=a,t.CarSegments=i,t.PedSegments=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createBike=function(){t.bike=n=new THREE.Object3D,n.mesh=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.JSONLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,n.back_wheel=e,n.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,n.mesh.add(e),n.front_wheel=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),n.mesh.add(e)})}),o.load("./assets/low-poly-cycle.json",function(e,t){t.forEach(function(e){e.skinning=!0}),n.rider=new THREE.SkinnedMesh(e,t),n.rider.scale.set(8,8,8),n.rider.position.set(0,-19,-10),n.rider.rotation.y=Math.PI,n.rider.rotation.x=Math.PI/2,n.mesh.add(n.rider),n.mixer=new THREE.AnimationMixer(n.rider),n.anim=n.mixer.clipAction(e.animations[1]),n.anim.setEffectiveWeight(1),n.anim.enabled=!0,n.anim.play(),n.anim.paused=!0,n.anim.timeScale=2,n.anim.paused=!1}),n.mesh.wide=1,n.mesh.long=3,n.mesh.position.z=2.2,n.mesh.scale.set(.2,.2,.2),n.mesh.tripod=new THREE.Object3D,n.mesh.add(n.mesh.tripod),n.mesh.tripod.position.set(0,2,25)},t.bike=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createLight=function(e){var t,o;n=new THREE.HemisphereLight(11184810,0,4),t=new THREE.AmbientLight(1118481,6),o=new THREE.DirectionalLight(16777215,.9),e.add(n),e.add(o),e.add(t)},t.setHLIntensity=function(e){n.intensity=e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,s=void 0,i=null,r=null,l=.1;function c(e,t,o){return e.mixer=new THREE.AnimationMixer(e),e.anim=e.mixer.clipAction(t),e.anim.setEffectiveWeight(1),e.anim.enabled=!0,e.anim.play(),e.anim.timeScale=o,e.anim.paused=!1,e}t.createTown=function(){t.town=n=new THREE.Object3D,t.cars=s=new THREE.Object3D,t.pedestrians=r=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.ColladaLoader;e.setTexturePath("assets/"),e.load("assets/road-design.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/road-design.obj",function(e){e.scale.set(24,24,24),e.rotation.x=Math.PI/2,n.add(e)})}),e.setTexturePath("assets/"),e.load("assets/houses-layout41.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/houses-layout41.obj",function(e){e.scale.set(2,2,2),e.rotation.x=Math.PI/2,n.add(e)})}),e.load("assets/dp1-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp1-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,-165,-1),n.dp1Arrows=e;var t=e.clone();t.position.set(-160,25,-1),n.dp2Arrows=t,n.add(e),n.add(t)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp12-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp12-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(140,-10,-1),n.dp12Arrows=e,n.add(e)})}),e.load("assets/dp13-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp13-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,178,-1),n.dp13Arrows=e,n.add(e)})}),e.load("assets/dp3-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp3-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-120,-170,-1),n.dp3Arrows=e,n.add(e)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp9-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp9-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,178,-1),n.dp9Arrows=e;var t=e.clone();t.position.set(-5,178,-1),n.dp11Arrows=t;var o=e.clone();o.position.set(-40,25,-1),n.dp5Arrows=o,n.add(e),n.add(t),n.add(o)})}),e.load("assets/dp4-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp4-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,-165,-1),n.dp4Arrows=e;var t=e.clone();t.position.set(100,25,-1),n.dp7Arrows=t;var o=e.clone();o.position.set(100,-165,-1),n.dp6Arrows=o;var a=e.clone();a.position.set(-60,35,-1),n.dp8Arrows=a,n.add(e),n.add(t),n.add(o),n.add(a)})}),e.load("assets/start.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/start.obj",function(e){e.scale.set(20,20,10),e.rotation.x=0,e.rotation.y=-Math.PI/2,e.rotation.z=-Math.PI/2,e.position.set(-190,-250,1),n.add(e)})}),e.load("assets/finish-line.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/finish-line.obj",function(e){e.scale.set(10,10,10),e.rotation.x=0,e.rotation.y=-Math.PI/2,e.rotation.z=-Math.PI/2,e.position.set(240,200,1),n.add(e)})}),e.load("assets/one-way.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/one-way.obj",function(e){e.scale.set(8,8,8),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(-110,35,0);var t=e.clone();t.position.set(-40,-60,.5),t.rotation.y=-Math.PI/2,n.add(e),n.add(t)})}),o.load("assets/car-low-poly6.dae",function(e){(i=e.scene).scale.set(3,3,3),i.traverse(function(e){if(e instanceof THREE.SkinnedMesh){t.parkedCarDoor=a=e,a.bone=e.skeleton.bones[0];var o=new THREE.CubeGeometry(.5,4,5,1,1,1,1),n=new THREE.MeshBasicMaterial({color:65280,wireframe:!0}),s=new THREE.Mesh(o,n);s.position.set(-110,-172,3),s.long=.5,s.wide=1,a.doorCollider=s}e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.updateMatrix(),i.rotation.z=Math.PI/2,i.rotation.x=0,i.position.set(-110,-175,0),n.add(i)}),e.setTexturePath("assets/"),e.load("assets/yellow2.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/yellow2.obj",function(e){e.scale.set(5,5,5),s.yellowCar=e,s.yellowCar.speed=(Math.random()+1)*l,s.yellowCar.rotation.x=Math.PI/2,s.yellowCar.rotation.y=Math.PI,s.yellowCar.rotation.z=0,s.yellowCar.position.set(-4,100,0),n.add(e)})}),e.setTexturePath("assets/"),e.load("assets/car-yellow1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/car-yellow1.obj",function(e){e.scale.set(3,3,3),s.yellowCar1=e,s.yellowCar1.rotation.x=0,s.yellowCar1.rotation.y=0,s.yellowCar1.rotation.z=0,s.yellowCar1.long=6,s.yellowCar1.wide=4,s.yellowCar1.speed=(Math.random()+1)*l,n.add(s.yellowCar1)})}),e.setTexturePath("assets/"),e.load("assets/car-green1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/car-green1.obj",function(e){e.scale.set(3,3,3),s.greenCar=e,s.greenCar.rotation.x=0,s.greenCar.rotation.y=0,s.greenCar.rotation.z=Math.PI/2,s.greenCar.long=6,s.greenCar.wide=4,s.greenCar.speed=(Math.random()+1)*l,n.add(s.greenCar)})}),o.load("assets/car-low-red.dae",function(e){s.redCar=e.scene,s.redCar.scale.x=s.redCar.scale.y=s.redCar.scale.z=5,s.redCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),s.redCar.updateMatrix(),s.redCar.rotation.y=Math.PI,s.redCar.rotation.z=0,s.redCar.position.set(250,250,0),s.redCar.long=6,s.redCar.wide=5,s.redCar.speed=(Math.random()+1)*l,n.add(s.redCar)}),o.load("assets/car-low-blue.dae",function(e){s.blueCar=e.scene,s.blueCar.scale.x=s.blueCar.scale.y=s.blueCar.scale.z=5,s.blueCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),s.blueCar.updateMatrix(),s.blueCar.rotation.y=Math.PI,s.blueCar.rotation.z=0,s.blueCar.position.set(250,250,0),s.blueCar.long=6,s.blueCar.wide=5,s.blueCar.speed=(Math.random()+1)*l,n.add(s.blueCar)}),function(){var e=new THREE.JSONLoader;e.load("./assets/dooring.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(2,2,2),o.position.set(-110,-180,0),o.rotation.x=Math.PI/2,o.rotation.y=-Math.PI,n.add(o),n.billBoard=c(o,e.animations[1],.5)}),e.load("./assets/low-poly-boy-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(160,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingBoy=c(o,e.animations[0],2);var a=o.clone();a.position.set(-115,-110,0),a.rotation.y=-Math.PI,a.wide=2,a.long=2,n.add(a),r.walkingBoy1=c(a,e.animations[0],.12)}),e.load("./assets/low-poly-girl-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(155,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingGirl=c(o,e.animations[0],2)}),e.load("./assets/low-poly-girl-walk2.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1.2,1.2,1.2),o.position.set(165,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingGirl1=c(o,e.animations[0],2)}),e.load("./assets/robot-rig3.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,240,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot=c(o,e.animations[3],1)}),e.load("./assets/robot-rig4.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,245,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot1=c(o,e.animations[3],1.2)})}()},t.town=n,t.parkedCarDoor=a,t.cars=s,t.pedestrians=r},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.visibilityDuringGame=function(){e(".meta").hide(),e("#infoButton").hide(),e("#topCamera").show(),e("#chaseCamera").show(),e("#score").show()},t.visibilityOutsideGame=function(){e(".meta").show(),e("#infoButton").show(),e("#topCamera").hide(),e("#chaseCamera").hide(),e("#score").hide()},t.hideAll=function(){e(".meta").hide(),e("#infoButton").hide(),e("#topCamera").hide(),e("#chaseCamera").hide(),e("#score").hide()}}).call(this,o(0))},function(e,t,o){"use strict";!function(e){e&&e.__esModule}(o(9))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.init=j;var n=p(o(10)),a=o(11),s=o(2),i=p(o(3)),r=o(12),l=o(4),c=o(6),d=o(1),u=o(5),w=o(7);function p(e){return e&&e.__esModule?e:{default:e}}var E=void 0,m=void 0,h=0,g=0,b=0,f=new THREEx.KeyboardState,T=.05,R=null,C=!1,y=new THREE.Clock,H=null,v=null,k=!1,P=!1,M=!0,V=!0,B=0,L=0,x=0;function D(e,t){return null!==e&&null!==t&&(e.position.x<t.position.x+t.wide&&e.position.x+e.wide>t.position.x&&e.position.y<t.position.y+t.long&&e.long+e.position.y>t.position.y)}function A(){e.each(BootstrapDialog.dialogs,function(e,t){t.close()}),(0,r.cleanup)(),BootstrapDialog.show({title:"Game Over!",message:"Ready to Restart the Game?",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Game",cssClass:"btn-success",action:function(e){(0,r.cleanup)(),C=!1,O()}},{label:"Leave Game",cssClass:"btn-danger",action:function(e){(0,w.visibilityOutsideGame)(),cancelAnimationFrame(R),e.close(),C=!0}}]}),C=!0}function I(e,t){if(null!==t){h+=.0015*t.speed;var o=s.pathList[e].getPoint(h);if(null!==o){if(!0!==function(e,t){if(e===s.CarSegments.blueCar&&-160===t.y){if(B>0&&B<80)return B++,!0;if(B>=80&&(B=0),t.x+60<1&&t.x+60>0)return B=1,!0}else if(e===s.CarSegments.yellowCar1&&-160===t.y){if(x>0&&x<80)return x++,!0;if(x>=80&&(x=0),t.x+60<1&&t.x+60>0)return x=1,!0}else if(e===s.CarSegments.yellowCar1&&-165===t.x){if(L>0&&L<80)return L++,!0;if(L>=80&&(L=0),t.y-170<1&&t.y-170>0)return L=1,!0}return!1}(e,o)){t.position.x=o.x,t.position.y=o.y;var n=new THREE.Vector3(0,0,1),a=S(e,h);a=a>0?-Math.PI+a:Math.PI+a,t.quaternion.setFromAxisAngle(n,a)}}else h=0}}function S(e,t){var o=s.pathList[e].getTangent(t).normalize();return-Math.atan(o.x/o.y)}function O(){if(!0!==C){var t=r.activeSegment;I(s.CarSegments.redCar,c.cars.redCar),I(s.CarSegments.blueCar,c.cars.blueCar),I(s.CarSegments.yellowCar1,c.cars.yellowCar1),I(s.CarSegments.greenCar,c.cars.greenCar),function(e){var t=new THREE.Vector3;if(null!==s.pathList){var o=(0,r.getPosition)();o+=.002*(0,r.getBikeSpeed)(),(0,r.setPosition)(o);var n=s.pathList[e].getPoint((0,r.getPosition)());if(null!==n&&null!==l.bike&&null!==l.bike.mesh){H.destroy(),v.destroy(),l.bike.mesh.position.x=n.x,l.bike.mesh.position.y=n.y,t.setFromMatrixPosition(l.bike.mesh.tripod.matrixWorld),d.inspectCamera.position.lerp(t,.2),d.inspectCamera.lookAt(l.bike.mesh.position);var a=S(e,(0,r.getPosition)());a>0&&(a=-Math.PI+a);var i=new THREE.Vector3(0,0,1);l.bike.mesh.quaternion.setFromAxisAngle(i,a),l.bike.mesh.children.length>4&&(l.bike.front_wheel.rotation.x-=.1,l.bike.back_wheel.rotation.x-=.1)}}}(t),e("#score").text("SCORE: "+r.reward),function(){var e=s.PedSegments.boy1,t=s.PedSegments.robot1;if(null!==c.pedestrians){g+=.002*T,b+=.005*T;var o=s.pathList[e].getPoint(g),n=s.pathList[t].getPoint(b);if(null!==o)if(null!==n){var a=c.pedestrians.walkingBoy.position.y,i=c.pedestrians.runningRobot.position.x;0!=a&&(a>o.y&&!1===k?(c.pedestrians.walkingBoy.rotation.y=0,c.pedestrians.walkingGirl.rotation.y=0,c.pedestrians.walkingGirl1.rotation.y=0,k=!0,M=!1):a<o.y&&!1===M&&(c.pedestrians.walkingBoy.rotation.y=Math.PI,c.pedestrians.walkingGirl.rotation.y=Math.PI,c.pedestrians.walkingGirl1.rotation.y=Math.PI,k=!1,M=!0)),0!=i&&(i>n.x&&!1===P?(c.pedestrians.runningRobot.rotation.y=3*Math.PI/2,c.pedestrians.runningRobot1.rotation.y=3*Math.PI/2,P=!0,V=!1):i<n.x&&!1===V&&(c.pedestrians.runningRobot.rotation.y=Math.PI/2,c.pedestrians.runningRobot1.rotation.y=Math.PI/2,P=!1,V=!0)),c.pedestrians.walkingBoy.position.x=o.x,c.pedestrians.walkingGirl.position.x=o.x-5,c.pedestrians.walkingGirl1.position.x=o.x+5,c.pedestrians.walkingBoy.position.y=c.pedestrians.walkingGirl.position.y=o.y,c.pedestrians.walkingGirl1.position.y=o.y-5,c.pedestrians.runningRobot.position.x=n.x,c.pedestrians.runningRobot1.position.x=n.x,c.pedestrians.runningRobot.position.y=n.y,c.pedestrians.runningRobot1.position.y=n.y-5}else b=0;else g=0}}(),function(e){0!==e&&(!0===D(l.bike.mesh,c.cars.redCar)&&(console.log("Hit Red Car!"),A()),!0===D(l.bike.mesh,c.cars.blueCar)&&(console.log("Hit Blue Car!"),A()),!0===D(l.bike.mesh,c.cars.greenCar)&&(console.log("Hit Blue Car!"),A()),!0===D(l.bike.mesh,c.cars.yellowCar1)&&(console.log("Hit Blue Car!"),A()),!0===D(l.bike.mesh,c.pedestrians.walkingBoy)&&(console.log("Hit Boy!"),A()),!0===D(l.bike.mesh,c.pedestrians.walkingGirl)&&(console.log("Hit Girl!"),A()),!0===D(l.bike.mesh,c.pedestrians.walkingGirl1)&&(console.log("Hit Girl 1!"),A()),!0===D(l.bike.mesh,c.pedestrians.runningRobot)&&(console.log("Hit Running Robot!"),A()),!0===D(l.bike.mesh,c.pedestrians.runningRobot1)&&(console.log("Hit Running Robot1!"),A()),null!==c.parkedCarDoor&&(6===e?(Math.random()<.025&&(c.parkedCarDoor.bone.rotation.z=-1.5,c.parkedCarDoor.doorCollider.position.y=-170),D(l.bike.mesh,c.parkedCarDoor.doorCollider)&&(console.log("Hit Car Door!"),A())):(c.parkedCarDoor.bone.rotation.z=0,c.parkedCarDoor.doorCollider.position.y=-172)))}(t),R=requestAnimationFrame(O),function(){d.orbitControls.hcontrols.update(),d.orbitControls.tcontrols.update(),f.pressed("1")&&(0,d.setActiveCamera)(d.hoveringCamera),f.pressed("2")&&(0,d.setActiveCamera)(d.trailingCamera);var e=(0,d.getActiveCamera)();e&&E.render(m,e);var t=y.getDelta();l.bike.mixer&&l.bike.mixer.update(t),c.town.billBoard&&c.town.billBoard.mixer&&c.town.billBoard.mixer.update(t),c.pedestrians.walkingBoy&&c.pedestrians.walkingBoy.mixer&&c.pedestrians.walkingBoy.mixer.update(t),c.pedestrians.walkingBoy1&&c.pedestrians.walkingBoy1.mixer&&c.pedestrians.walkingBoy1.mixer.update(t),c.pedestrians.walkingGirl&&c.pedestrians.walkingGirl.mixer&&c.pedestrians.walkingGirl.mixer.update(t),c.pedestrians.walkingGirl1&&c.pedestrians.walkingGirl1.mixer&&c.pedestrians.walkingGirl1.mixer.update(t),c.pedestrians.runningRobot&&c.pedestrians.runningRobot.mixer&&c.pedestrians.runningRobot.mixer.update(t),c.pedestrians.runningRobot1&&c.pedestrians.runningRobot1.mixer&&c.pedestrians.runningRobot1.mixer.update(t)}()}}function j(){!function(){var e=window.innerHeight,t=window.innerWidth;(m=new THREE.Scene).fog=new THREE.Fog(i.default.white,100,1e3),m.add((0,n.default)(100)),m.rotation.z+=Math.PI/2,m.rotation.x-=Math.PI/2,(E=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(t,e),E.shadowMap.enabled=!0,E.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(E.domElement),H=lottie.loadAnimation({container:document.getElementById("logo"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_rs.json"}),v=lottie.loadAnimation({container:document.getElementById("bike"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_bike.json"}),(0,a.infoButton)(),(0,a.selectCameraView)()}(),(0,d.createCameras)(m,E,l.bike),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),o=new THREE.Mesh(t,e),n=new THREE.Object3D;n.add(o),m.add(n)}(),(0,u.createLight)(m),(0,c.createTown)(),m.add(c.town),(0,l.createBike)(),m.add(l.bike.mesh),l.bike.mesh.add(d.trailingCamera),(0,d.setActiveCamera)(d.trailingCamera);var t;t=(0,s.createPaths)();for(var o=0;o<t.length;o++)m.add(t[o]);(0,w.hideAll)(),function(){var t=e('<div class="welcomeDialog"></div>');t.append('<img src="./images/gameLayout.png" />'),t.append('<video controls width="500" autoplay="true">           <source src="./images/sampleRide.mp4" type="video/mp4">           <source src="./images/sampleScene.png">           Sorry, your browser doesn\'t support embedded videos.           </video>'),t.append("<p> In this level, the user is prompted to choose alternate paths for the cyclist.                         The objective of the game to \n make it to the end without a crash.</p>"),t.append('<div class="row">                           <div class="border col-md-6 boxlayout">                              <ul> Sample Interactions:                                <li> Cyclist stops at intersection. The user has to decide between going straight or turning right.</li>                                <li> Cyclist can and SHOULD check surrounding traffic before deciding on the next move. </li>                                <li> Cyclist can check the View from Behind, Right Side and/or Left Side.</li>                               <li> If the Cyclist does not make a choice when COUNTDOWN reaches 0, A random choice is done.</li>                              </ul>                           </div>                           <div class="border col-md-6 boxlayout">                             <ul> Controls:                               <li> To Choose the Top Hovering Camera, Press 1 (Mobile: Red Camera Icon)</li>                               <li> To Choose the Trailing Camera, Press 2 (Mobile: Black Camera Icon)</li>                               <li> To Zoom in and Out, use middle mouse wheel(Mobile TBD)</li>                               <li> To Rotate around the Z axis, use left mouse button(Mobile TBD)</li>                               <li> To move the TOP Camera around, use right mouse button (Mobile: screen touch)</li>                             </ul>                           </div>                         </div>'),BootstrapDialog.show({title:"Ride Safely Interactive",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Start Game",cssClass:"btn-success",action:function(e){(0,w.visibilityDuringGame)(),e.close(),O()}},{label:"Quit Game",cssClass:"btn-danger",action:function(e){(0,w.visibilityOutsideGame)(),e.close()}}]})}(),C=!1}window.addEventListener("load",j,!1)}).call(this,o(0))},function(e,t,o){"use strict";function n(e,t,o,n){var a=new THREE.Geometry,s=void 0;s=n?new THREE.LineDashedMaterial({color:o,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:o}),a.vertices.push(e.clone()),a.vertices.push(t.clone());var i=new THREE.Line(a,s,THREE.LineSegments);return i.computeLineDistances(),i}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.selectCameraView=t.infoButton=void 0;var n=o(1);t.infoButton=function(){e("#infoButton").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",position:"fixed",title:"Place Holder for More Game Info."}).append("<img width='42' height='42' src='images/infoButton.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#infoButton").on("click",function(){e(this).tooltip("enable").tooltip("open")})},t.selectCameraView=function(){e("#topCamera").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",title:"Click Me for Top Camera View."}).append("<img width='42' height='42' src='images/camera-icon-red.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#topCamera").on("click",function(){(0,n.setActiveCamera)(n.hoveringCamera)}),e("#topCamera").hover(function(){e(this).append(e("<span class='cameraDisplay'> Click Me for Top Camera View!</span>"))},function(){e(this).find("span:last").remove()}),e("#chaseCamera").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",title:"Click Me for Trailing Camera View."}).append("<img width='42' height='42' src='images/camera-icon.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("#chaseCamera").on("click",function(){(0,n.setActiveCamera)(n.trailingCamera)}),e("#chaseCamera").hover(function(){e(this).append(e("<span class='cameraDisplay'> Click Me for Trailing Camera View!</span>"))},function(){e(this).find("span:last").remove()})}}).call(this,o(0))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.reward=t.cleanup=t.setPosition=t.getPosition=t.getBikeSpeed=t.resetPosition=t.resetSegment=t.activeSegment=void 0;var n=o(2),a=o(4),s=o(1),i=o(5),r=o(6),l=o(7),c=2e3,d=0,u=0,w=2,p=n.pathList,E=null,m=500,h=100,g=0,b=null,f=null,T=2e4,R=null,C=h,y=10,H=20,v=20,k=5;function P(){t.reward=C=h}function M(){u=0}function V(e){w=e}function B(){return w}function L(){(0,s.setActiveCamera)(s.trailingCamera),null}function x(){if(E=null,null!==n.pathList&&null!==d)if(null===n.pathList[d].getPoint(u))switch(V(2+5*Math.random()),(0,i.setHLIntensity)(6),a.bike.anim.paused=!0,(0,s.setActiveCamera)(s.trailingCamera),d){case 0:!function(){b=setTimeout(D,T,1,3,r.town.dp1Arrows,null,10);var o=e("<div > </div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp1Arrows.position.z=1;BootstrapDialog.show({title:"DP-1: Limited Time to decide!",cssClass:"decisionPoint1",message:o,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){t.reward=C-=H,A(1,e,null,r.town.dp1Arrows,f)}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){t.reward=C+=v,A(3,e,1,r.town.dp1Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(0)}}]})}();break;case 1:!function(){b=setTimeout(D,T,2,4,r.town.dp2Arrows,2,2);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp2Arrows.position.z=1,BootstrapDialog.show({title:"DP-2: Limited seconds to choose a direction!",cssClass:"decisionPoint1",message:o,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){A(2,e,2,r.town.dp2Arrows,f),t.reward=C+=v}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){t.reward=C-=H,A(4,e,1,r.town.dp2Arrows,f)}},{label:"Look Right",cssClass:"btn-warning lookout",action:function(e){S(0)}}]})}();break;case 3:!function(){b=setTimeout(D,T,6,5,r.town.dp3Arrows,null,null);var o=e("<div ></div>");o.append("Caution: potential car door opening! <br />"),f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp3Arrows.position.z=1,BootstrapDialog.show({title:"DP-3: Limited seconds to choose a direction!",cssClass:"decisionPoint1",message:o,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-danger",action:function(e){t.reward=C-=H,A(6,e,null,r.town.dp3Arrows,f)}},{label:"Steer Away",cssClass:"btn-primary",action:function(e){t.reward=C+=v,A(5,e,null,r.town.dp3Arrows,f)}},{label:"Look Back",cssClass:"btn-warning lookout",action:function(e){S(-Math.PI)}}]})}();break;case 4:!function(){b=setTimeout(D,T,9,10,r.town.dp8Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp8Arrows.position.z=1,BootstrapDialog.show({title:"DP-8: Don't take chances!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){A(9,e,null,r.town.dp8Arrows,f)}},{label:"Continue Straight to Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(10,e,null,r.town.dp8Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI/2)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(-Math.PI/2)}}]})}();break;case 8:!function(){b=setTimeout(D,T,10,9,r.town.dp5Arrows,null,null);var t=e("<div ></div>");f=I(T/1e3),t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp5Arrows.position.z=1,BootstrapDialog.show({title:"DP-5: Don't Tempt Drivers!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Right",cssClass:"btn-primary",action:function(e){A(10,e,null,r.town.dp5Arrows,f)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){A(9,e,null,r.town.dp5Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(0)}}]})}();break;case 5:case 6:!function(){b=setTimeout(D,T,8,7,r.town.dp4Arrows,null,null);var t=e("<div ></div>");f=I(T/1e3),t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp4Arrows.position.z=1,BootstrapDialog.show({title:"DP-4: Limited seconds to choose a direction!",cssClass:"decisionPoint2",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){A(8,e,null,r.town.dp4Arrows,f)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){A(7,e,null,r.town.dp4Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI/2)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(-Math.PI/2)}},{label:"Look Back",cssClass:"btn-info lookout2",action:function(e){S(-Math.PI)}}]})}();break;case 7:!function(){b=setTimeout(D,T,13,14,r.town.dp6Arrows,null,null);var t=e("<div ></div>");f=I(T/1e3),t.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp6Arrows.position.z=1,BootstrapDialog.show({title:"DP-6: Limited seconds to choose a direction",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){A(13,e,null,r.town.dp6Arrows,f)}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){A(14,e,null,r.town.dp6Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI/2)}},{label:"Look Back",cssClass:"btn-warning lookout",action:function(e){S(Math.PI)}}]})}();break;case 10:!function(){b=setTimeout(D,T,11,12,r.town.dp7Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp7Arrows.position.z=1,BootstrapDialog.show({title:"DP-7: Don't take chances!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){A(11,e,null,r.town.dp7Arrows,f)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(12,e,null,r.town.dp7Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI/2)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(-Math.PI/2)}}]})}();break;case 2:!function(){b=setTimeout(D,T,15,16,r.town.dp9Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp9Arrows.position.z=1,BootstrapDialog.show({title:"DP-9: Heavy Traffic Alert!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Road",cssClass:"btn-primary",action:function(e){A(15,e,null,r.town.dp9Arrows,f)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(16,e,null,r.town.dp9Arrows,f)}},{label:"Look Back",cssClass:"btn-warning lookout",action:function(e){S(-Math.PI/2)}},{label:"Look Right",cssClass:"btn-success lookout1",action:function(e){S(0)}}]})}();break;case 9:!function(){b=setTimeout(D,T,19,20,r.town.dp11Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp11Arrows.position.z=1,BootstrapDialog.show({title:"DP-11: Pedestrians Alert!!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){A(19,e,null,r.town.dp11Arrows,f)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(20,e,null,r.town.dp11Arrows,f)}},{label:"Look Left",cssClass:"btn-success lookout",action:function(e){S(Math.PI)}},{label:"Look Right",cssClass:"btn-warning lookout1",action:function(e){S(0)}}]})}();break;case 15:!function(){b=setTimeout(D,T,23,24,r.town.dp13Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp13Arrows.position.z=1,BootstrapDialog.show({title:"DP-13: Pedestrians Alert/Traffic Alert!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){A(23,e,null,r.town.dp13Arrows,f)}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(24,e,null,r.town.dp13Arrows,f)}},{label:"Look Right",cssClass:"btn-success lookout",action:function(e){S(-Math.PI/2)}},{label:"Look Back",cssClass:"btn-warning lookout1",action:function(e){S(-Math.PI)}}]})}();break;case 14:!function(){b=setTimeout(D,T,21,22,r.town.dp12Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp12Arrows.position.z=1,BootstrapDialog.show({title:"DP-12: Heavy Traffic Alert!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(21,e,null,r.town.dp12Arrows,f)}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){A(22,e,null,r.town.dp12Arrows,f)}},{label:"Look Back",cssClass:"btn-warning lookout",action:function(e){S(-Math.PI/2)}}]})}();break;case 16:!function(){b=setTimeout(D,T,17,18,r.town.dp10Arrows,null,null);var o=e("<div ></div>");f=I(T/1e3),o.append("<strong>CountDown: </strong> <span class=display_cnt> </span>"),d,r.town.dp10Arrows.position.z=1,BootstrapDialog.show({title:"DP-10: Pedestrians Alert!",message:o,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){t.reward=C-=20,A(17,e,null,r.town.dp10Arrows,f)}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){A(18,e,null,r.town.dp10Arrows,f)}},{label:"Look Back",cssClass:"btn-warning lookout",action:function(e){S(-Math.PI)}}]})}();break;case 11:case 12:case 13:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:default:!function(){var t=e('<div class="decisionPoint"></div>');d,BootstrapDialog.show({title:"Successful Completion!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Cycling Journey",cssClass:"btn-success",action:function(e){P(),A(0,e)}},{label:"Leave Game",cssClass:"btn-danger",action:function(e){(0,l.visibilityOutsideGame)(),e.close()}}]})}()}else E=setTimeout(x,c)}function D(o,n,a,s,i){t.reward=C-=y,Math.random()<=.5?A(o,null,s,a):A(n,null,i,a),e.each(BootstrapDialog.dialogs,function(e,t){t.close()})}function A(e,o,n,r,l){t.reward=C+=g,t.activeSegment=d=e,M(),o&&o.close(),E=setTimeout(x,c),b&&(clearTimeout(b),b=null),n&&V(n+B()),r&&(r.position.z=-1),l&&clearInterval(l),a.bike.anim.paused=!1,(0,s.setActiveCamera)(s.trailingCamera),(0,i.setHLIntensity)(4)}function I(t){return R=setInterval(function(){g=t,t<=6&&t>0?e(".display_cnt").html("<font color='red'>"+--t+"</font>"):t>0&&e(".display_cnt").html(--t),t<=0&&(clearInterval(R),R=null,t=0)},1e3)}function S(e){(0,s.setActiveCamera)(s.inspectCamera);var o=new THREE.Vector3;o.setFromMatrixPosition(a.bike.mesh.tripod.matrixWorld),s.inspectCamera.position.lerp(o,.2),s.inspectCamera.lookAt(a.bike.mesh.position),s.inspectCamera.rotation.x=0,s.inspectCamera.rotation.y=e,s.inspectCamera.rotation.z=0,setTimeout(L,m),t.reward=C+=k}null!==p&&setTimeout(x,c),t.activeSegment=d,t.resetSegment=function(){t.activeSegment=d=0},t.resetPosition=M,t.getBikeSpeed=B,t.getPosition=function(){return u},t.setPosition=function(e){u=e},t.cleanup=function(){P(),e.each(BootstrapDialog.dialogs,function(e,t){t.close()}),b&&(clearTimeout(b),b=null),E&&clearTimeout(E),f&&clearInterval(f),A(0)},t.reward=C}).call(this,o(0))}]);
//# sourceMappingURL=app.bundle.js.map