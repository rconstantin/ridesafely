!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathList=t.createPaths=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(1));var i=[];function a(e,t,n){i[e]=new THREE.Path,i[e].moveTo(t.x,t.y);for(var a=0;a<n.length;a++)i[e].lineTo(n[a].x,n[a].y);new THREE.Line;return function(e){for(var t=i[e].getSpacedPoints(20),n=0;n<t.length;n++){var a=t[n];t[n]=new THREE.Vector3(a.x,a.y,0)}var r=new THREE.Geometry;r.vertices=t;var s=new THREE.LineDashedMaterial({linewidth:1,color:o.default.red,dashSize:3,gapSize:3});return new THREE.Line(r,s)}(e)}t.createPaths=function(){var e=[],t=void 0,n=[];return t=new THREE.Vector3(-250,-240,0),e[0]=new THREE.Vector3(-160,-240,0),e[1]=new THREE.Vector3(-160,-185,0),n[0]=new THREE.Line,n[0]=a(0,t,e),e=[],t=new THREE.Vector3(-160,-185,0),e[0]=new THREE.Vector3(-160,35,0),n[1]=new THREE.Line,n[1]=a(1,t,e),t=new THREE.Vector3(-160,35,0),e[0]=new THREE.Vector3(-160,185,0),e[1]=new THREE.Vector3(250,185,0),n[2]=new THREE.Line,n[2]=a(2,t,e),e=[],t=new THREE.Vector3(-160,-185,0),e[0]=new THREE.Vector3(-135,-185,0),n[3]=new THREE.Line,n[3]=a(3,t,e),e=[],t=new THREE.Vector3(-160,35,0),e[0]=new THREE.Vector3(-40,35,0),n[4]=new THREE.Line,n[4]=a(4,t,e),e=[],t=new THREE.Vector3(-135,-185,0),e[0]=new THREE.Vector3(-80,-150,0),e[1]=new THREE.Vector3(-40,-185,0),n[5]=new THREE.Line,n[5]=a(5,t,e),e=[],t=new THREE.Vector3(-135,-185,0),e[0]=new THREE.Vector3(-80,-170,0),e[1]=new THREE.Vector3(-40,-185,0),n[6]=new THREE.Line,n[6]=a(6,t,e),e=[],t=new THREE.Vector3(-40,-185,0),e[0]=new THREE.Vector3(110,-185,0),n[7]=new THREE.Line,n[7]=a(7,t,e),e=[],t=new THREE.Vector3(-40,-185,0),e[0]=new THREE.Vector3(-40,35,0),n[8]=new THREE.Line,n[8]=a(8,t,e),e=[],t=new THREE.Vector3(-40,35,0),e[0]=new THREE.Vector3(-10,35,0),e[1]=new THREE.Vector3(-10,185,0),e[2]=new THREE.Vector3(250,185,0),n[9]=new THREE.Line,n[9]=a(9,t,e),e=[],t=new THREE.Vector3(-40,35,0),e[0]=new THREE.Vector3(110,35,0),n[10]=new THREE.Line,n[10]=a(10,t,e),e=[],t=new THREE.Vector3(110,35,0),e[0]=new THREE.Vector3(110,185,0),e[1]=new THREE.Vector3(250,185,0),n[11]=new THREE.Line,n[11]=a(11,t,e),e=[],t=new THREE.Vector3(110,35,0),e[0]=new THREE.Vector3(185,35,0),e[1]=new THREE.Vector3(185,185,0),e[2]=new THREE.Vector3(250,185,0),n[12]=new THREE.Line,n[12]=a(12,t,e),e=[],t=new THREE.Vector3(110,-185,0),e[0]=new THREE.Vector3(110,35,0),e[1]=new THREE.Vector3(110,185,0),e[2]=new THREE.Vector3(250,185,0),n[13]=new THREE.Line,n[13]=a(13,t,e),e=[],t=new THREE.Vector3(110,-185,0),e[0]=new THREE.Vector3(185,-185,0),e[1]=new THREE.Vector3(185,185,0),e[2]=new THREE.Vector3(250,185,0),n[14]=new THREE.Line,n[14]=a(14,t,e),n},t.pathList=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,n){"use strict";!function(e){e&&e.__esModule}(n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=g;var o=c(n(4)),i=n(0),a=c(n(1)),r=n(5),s=n(7);function c(e){return e&&e.__esModule?e:{default:e}}var l=void 0,u=void 0,d=void 0,E=void 0,w=void 0,f=void 0,p=(new THREE.Clock,new THREE.Vector3(0,0,1));new THREE.Vector3;function T(e){if(null!==i.pathList){var t=(0,r.getPosition)();t+=.002*r.speed,(0,r.setPosition)(t);var n=i.pathList[e].getPoint((0,r.getPosition)());if(null!==n&&null!==s.bike&&null!==s.bike.mesh){s.bike.mesh.position.x=n.x-4,s.bike.mesh.position.y=n.y+4;var o=function(e,t){var n=i.pathList[e].getTangent(t).normalize();return-Math.atan(n.x/n.y)}(e,(0,r.getPosition)());o>0&&(o=-Math.PI+o),s.bike.mesh.quaternion.setFromAxisAngle(p,o),s.bike.mesh.children.length>3&&(s.pedals.rotation.x-=.1,s.front_wheel.rotation.x-=.1,s.back_wheel.rotation.x-=.1)}}}function h(){T(r.activeSegment),requestAnimationFrame(h),E.update(),l.render(u,d)}function g(){!function(){var e=window.innerHeight,t=window.innerWidth;(u=new THREE.Scene).fog=new THREE.Fog(a.default.white,100,1e3),u.add((0,o.default)(100)),u.rotation.z+=Math.PI/2,u.rotation.x-=Math.PI/2,(l=new THREE.WebGLRenderer({alpha:!0,antialias:!1})).setSize(t,e),l.shadowMap.enabled=!0,l.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(l.domElement);var n=t/e;(d=new THREE.PerspectiveCamera(45,n,1,1e4)).position.set(-50,250,450),(E=new THREE.OrbitControls(d,l.domElement)).enableDamping=!0,E.dampingFactor=.25,E.enableZoom=!0,E.update()}(),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),n=new THREE.Mesh(t,e),o=new THREE.Object3D;o.add(n),u.add(o)}(),w=new THREE.HemisphereLight(11184810,0,.9),(f=new THREE.DirectionalLight(16777215,.9)).position.set(150,350,350),f.castShadow=!0,f.shadow.camera.left=-400,f.shadow.camera.right=400,f.shadow.camera.top=400,f.shadow.camera.bottom=-400,f.shadow.camera.near=1,f.shadow.camera.far=1e3,f.shadow.mapSize.width=2048,f.shadow.mapSize.height=2048,u.add(w),u.add(f),(0,s.createBike)(),u.add(s.bike.mesh);var e;e=(0,i.createPaths)();for(var t=0;t<e.length;t++)u.add(e[t]);h()}window.addEventListener("load",g,!1)},function(e,t,n){"use strict";function o(e,t,n,o){var i=new THREE.Geometry,a=void 0;a=o?new THREE.LineDashedMaterial({color:n,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:n}),i.vertices.push(e.clone()),i.vertices.push(t.clone());var r=new THREE.Line(i,a,THREE.LineSegments);return r.computeLineDistances(),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.speed=t.activeSegment=void 0;var o=n(0),i=2e3,a=0,r=0,s=1;function c(){r=0}function l(e){t.speed=s=e}function u(){if(null!==o.pathList&&null!==a)if(null===o.pathList[a].getPoint(r))switch(t.speed=s=1,a){case 0:!function(){var n=e("<div></div>");n.append("What's this cycling sign stand for? <br />"),n.append('<img src="./images/right.png" />'),BootstrapDialog.show({title:"Guess what this means",message:n,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=a=1,c(),e.close(),setTimeout(u,i)}},{label:"Turn Right",action:function(e){t.activeSegment=a=3,c(),l(10),e.close(),setTimeout(u,i)}}]})}();break;case 1:!function(){var n=e("<div></div>");n.append("What's this cycling sign stand for? <br />"),n.append('<img src="./images/stop1.png" />'),n.append("Cautious going straight: busy traffic road ahead! <br />"),n.append("Cautious turning right: traffic violation - entering one-way road against traffic! <br />"),BootstrapDialog.show({title:"Guess what this means",message:n,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=a=2,c(),l(2),e.close(),setTimeout(u,i)}},{label:"Turn Right",action:function(e){t.activeSegment=a=4,c(),l(2),e.close(),setTimeout(u,i)}}]})}();break;case 3:!function(){var n=e("<div></div>");n.append("Caution: don't crash into car door opening! <br />"),n.append('<img src="./images/dooring.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"ride close",action:function(e){t.activeSegment=a=6,c(),e.close(),setTimeout(u,i)}},{label:"steer away",action:function(e){t.activeSegment=a=5,esetPosition(),e.close(),setTimeout(u,i)}}]})}();break;case 4:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic laws - Get Back on Track! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=a=9,c(),e.close(),setTimeout(u,i)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=a=10,c(),e.close(),setTimeout(u,i)}}]})}();break;case 8:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Stop and check for traffic! <br />"),n.append('<img src="./images/right.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn right when clear",action:function(e){t.activeSegment=a=10,c(),e.close(),setTimeout(u,i)}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=a=9,c(),e.close(),setTimeout(u,i)}}]})}();break;case 5:case 6:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Stop and check for traffic! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=a=8,c(),e.close(),setTimeout(u,i)}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=a=7,c(),e.close(),setTimeout(u,i)}}]})}();break;case 7:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Avoid Riding on busy sidewalks! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=a=13,c(),e.close(),setTimeout(u,i)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=a=14,c(),e.close(),setTimeout(u,i)}}]})}();break;case 10:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic laws - Avoid Riding on busy sidewalks! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=a=11,c(),e.close(),setTimeout(u,i)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=a=12,c(),e.close(),setTimeout(u,i)}}]})}()}else setTimeout(u,i)}null!==o.pathList&&setTimeout(u,i),t.activeSegment=a,t.speed=s,t.getPosition=function(){return r},t.setPosition=function(e){r=e}}).call(this,n(6))},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,i=null,a=null,r=null;t.createBike=function(){t.bike=r=new THREE.Object3D,r.mesh=new THREE.Object3D;var e=new THREE.MTLLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,t.back_wheel=o=e,r.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,r.mesh.add(e),t.front_wheel=i=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),r.mesh.add(e),e})}),e.load("assets/pedalsCrankArms.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/pedalsCrankArms.obj",function(e){e.scale.set(.5,.5,.5),e.position.set(.5,-19,-5),t.pedals=a=e,r.mesh.add(e)})}),e.load("assets/riderinpos.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/riderinpos.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI,e.rotation.x=Math.PI,e.rotation.x=Math.PI/2,e.position.set(0,-21,-9),e,r.mesh.add(e)})}),r.mesh.position.z=10},t.bike=r,t.pedals=a,t.front_wheel=i,t.back_wheel=o}]);
//# sourceMappingURL=app.bundle.js.map