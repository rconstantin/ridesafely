!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CarSegments=t.pathList=t.createPaths=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(2));var a=[],i={redCar:31,yellowCar:32};function r(e,t,n){a[e]=new THREE.Path,a[e].moveTo(t.x,t.y);for(var i=0;i<n.length;i++)a[e].lineTo(n[i].x,n[i].y);new THREE.Line;return function(e){for(var t=[],n=void 0,i=e<30?o.default.red:o.default.blue,r=0;r<a[e].curves.length;r++)n=new THREE.Vector3(a[e].curves[r].v1.x,a[e].curves[r].v1.y,0),t[r]=new THREE.Vector3(n.x,n.y,0);n=new THREE.Vector3(a[e].curves[a[e].curves.length-1].v2.x,a[e].curves[a[e].curves.length-1].v2.y,0),t[a[e].curves.length]=new THREE.Vector3(n.x,n.y,0);var s=new THREE.Geometry;s.vertices=t;var l=new THREE.LineDashedMaterial({linewidth:1,color:i,dashSize:3,gapSize:3});return new THREE.Line(s,l)}(e)}t.createPaths=function(){var e=[],t=void 0,n=[];return t=new THREE.Vector3(-250,-240,0),e[0]=new THREE.Vector3(-160,-240,0),e[1]=new THREE.Vector3(-160,-170,0),n[0]=new THREE.Line,n[0]=r(0,t,e),e=[],t=new THREE.Vector3(-160,-170,0),e[0]=new THREE.Vector3(-160,25,0),n[1]=new THREE.Line,n[1]=r(1,t,e),t=new THREE.Vector3(-160,25,0),e[0]=new THREE.Vector3(-160,185,0),e[1]=new THREE.Vector3(250,185,0),n[2]=new THREE.Line,n[2]=r(2,t,e),e=[],t=new THREE.Vector3(-160,-170,0),e[0]=new THREE.Vector3(-135,-170,0),n[3]=new THREE.Line,n[3]=r(3,t,e),e=[],t=new THREE.Vector3(-160,25,0),e[0]=new THREE.Vector3(-150,25,0),e[1]=new THREE.Vector3(-150,40,0),e[2]=new THREE.Vector3(-40,40,0),n[4]=new THREE.Line,n[4]=r(4,t,e),e=[],t=new THREE.Vector3(-135,-170,0),e[0]=new THREE.Vector3(-110,-155,0),e[1]=new THREE.Vector3(-40,-170,0),n[5]=new THREE.Line,n[5]=r(5,t,e),e=[],t=new THREE.Vector3(-135,-170,0),e[0]=new THREE.Vector3(-40,-170,0),n[6]=new THREE.Line,n[6]=r(6,t,e),e=[],t=new THREE.Vector3(-40,-170,0),e[0]=new THREE.Vector3(110,-170,0),n[7]=new THREE.Line,n[7]=r(7,t,e),e=[],t=new THREE.Vector3(-40,-170,0),e[0]=new THREE.Vector3(-40,25,0),n[8]=new THREE.Line,n[8]=r(8,t,e),e=[],t=new THREE.Vector3(-40,25,0),e[0]=new THREE.Vector3(-10,25,0),e[1]=new THREE.Vector3(-10,185,0),e[2]=new THREE.Vector3(250,185,0),n[9]=new THREE.Line,n[9]=r(9,t,e),e=[],t=new THREE.Vector3(-40,25,0),e[0]=new THREE.Vector3(110,25,0),n[10]=new THREE.Line,n[10]=r(10,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(150,25,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),n[11]=new THREE.Line,n[11]=r(11,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(150,25,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),n[12]=new THREE.Line,n[12]=r(12,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(135,-170,0),e[1]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,185,0),e[2]=new THREE.Vector3(250,185,0),n[13]=new THREE.Line,n[13]=r(13,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(150,-170,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),n[14]=new THREE.Line,n[14]=r(14,t,e),e=[],t=new THREE.Vector3(250,210,0),e[0]=new THREE.Vector3(185,210,0),e[1]=new THREE.Vector3(185,-165,0),e[2]=new THREE.Vector3(125,-165,0),e[3]=new THREE.Vector3(125,60,0),e[4]=new THREE.Vector3(0,60,0),e[5]=new THREE.Vector3(-10,40,0),e[6]=new THREE.Vector3(-165,40,0),e[7]=new THREE.Vector3(-165,185,0),e[8]=new THREE.Vector3(-40,185,0),e[9]=new THREE.Vector3(-40,40,0),e[10]=new THREE.Vector3(125,40,0),e[11]=new THREE.Vector3(125,185,0),e[12]=new THREE.Vector3(250,185,0),n[15]=new THREE.Line,n[15]=r(i.redCar,t,e),n},t.pathList=a,t.CarSegments=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,n){"use strict";!function(e){e&&e.__esModule}(n(4))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=P;var o=u(n(5)),a=u(n(6)),i=n(1),r=u(n(2)),s=n(7),l=n(8),c=n(9);function u(e){return e&&e.__esModule?e:{default:e}}var d=void 0,E=void 0,w=void 0,T=void 0,p=void 0,f=void 0,m=0,g=new THREEx.KeyboardState,h=p,R=.1,v=null,H=!1;function b(e,t){return e.position.x<t.position.x+t.wide&&e.position.x+e.wide>t.position.x&&e.position.y<t.position.y+t.long&&e.long+e.position.y>t.position.y}function y(){BootstrapDialog.show({title:"Game Over!",message:"Ready to Restart the Game?",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Game",action:function(e){location.reload(),H=!1,e.close(),H=!1}},{label:"Leave Game",action:function(e){cancelAnimationFrame(v),e.close()}}]}),H=!0}function V(e,t){var n=i.pathList[e].getTangent(t).normalize();return-Math.atan(n.x/n.y)}function k(){if(!0!==H){var e=s.activeSegment;!function(e,t){if(null!==t){m+=.002*R;var n=i.pathList[e].getPoint(m);if(null!==n){t.position.x=n.x,t.position.y=n.y;var o=new THREE.Vector3(0,0,1),a=V(e,m);t.quaternion.setFromAxisAngle(o,a)}}}(i.CarSegments.redCar,c.redCar),function(e){if(null!==i.pathList){var t=(0,s.getPosition)();t+=.002*(0,s.getBikeSpeed)(),(0,s.setPosition)(t);var n=i.pathList[e].getPoint((0,s.getPosition)());if(null!==n&&null!==l.bike&&null!==l.bike.mesh){l.bike.mesh.position.x=n.x,l.bike.mesh.position.y=n.y;var o=V(e,(0,s.getPosition)());o>0&&(o=-Math.PI+o);var a=new THREE.Vector3(0,0,1);l.bike.mesh.quaternion.setFromAxisAngle(a,o),l.bike.mesh.children.length>5&&(l.pedals.rotation.x-=.1,l.front_wheel.rotation.x-=.1,l.back_wheel.rotation.x-=.1,!0===b(l.bike.mesh,c.redCar)&&(console.log("Hit Car!"),y()),null!==c.parkedCarDoor&&(6===e?(c.parkedCarDoor.bone.rotation.z=-1.5,b(l.bike.mesh,c.parkedCarDoor.doorCollider)&&(console.log("Hit Car Door!"),y())):c.parkedCarDoor.bone.rotation.z=0))}}}(e),v=requestAnimationFrame(k),f.update(),T.update(),g.pressed("1")&&(h=p),g.pressed("2")&&(h=w),d.render(E,h)}}function P(){!function(){var e=window.innerHeight,t=window.innerWidth;(E=new THREE.Scene).fog=new THREE.Fog(r.default.white,100,1e3),E.add((0,o.default)(100)),E.rotation.z+=Math.PI/2,E.rotation.x-=Math.PI/2,(d=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(t,e),d.shadowMap.enabled=!0,d.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(d.domElement);var n=t/e;(w=new THREE.PerspectiveCamera(45,n,1,1e4)).position.set(0,-250,50),(T=new THREE.OrbitControls(w,d.domElement)).enableDamping=!0,T.dampingFactor=.25,T.enableZoom=!0,T.update(),(p=new THREE.PerspectiveCamera(45,n,1,1e4)).position.set(0,350,450),p.lookAt(E.position),(f=new THREE.OrbitControls(p,d.domElement)).enableDamping=!0,f.dampingFactor=.25,f.enableZoom=!0,f.update(),lottie.loadAnimation({container:document.getElementById("logo"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_rs.json"}),lottie.loadAnimation({container:document.getElementById("bike"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_bike.json"}),(0,a.default)()}(),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),n=new THREE.Mesh(t,e),o=new THREE.Object3D;o.add(n),E.add(o)}(),function(){var e,t,n;e=new THREE.HemisphereLight(11184810,0,.9),t=new THREE.AmbientLight(1118481),n=new THREE.DirectionalLight(16777215,.9),E.add(e),E.add(n),E.add(t)}(),(0,c.createTown)(),E.add(c.town),(0,l.createBike)(),l.bike.mesh.add(w),E.add(l.bike.mesh);var e;e=(0,i.createPaths)();for(var t=0;t<e.length;t++)E.add(e[t]);h=p,k()}window.addEventListener("load",P,!1)},function(e,t,n){"use strict";function o(e,t,n,o){var a=new THREE.Geometry,i=void 0;i=o?new THREE.LineDashedMaterial({color:n,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:n}),a.vertices.push(e.clone()),a.vertices.push(t.clone());var r=new THREE.Line(a,i,THREE.LineSegments);return r.computeLineDistances(),r}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){e("a").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",position:"fixed",title:"Press '1' for Chase Camera, '2' for Top Camera."}).append("<img width='42' height='42' src='images/infoButton.png'/>").tooltip({disabled:!0,close:function(t,n){e(this).tooltip("disable")}}),e("a").on("click",function(){e(this).tooltip("enable").tooltip("open")})}}).call(this,n(0))},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.getBikeSpeed=t.resetSegment=t.activeSegment=void 0;var o=n(1),a=2e3,i=0,r=0,s=1,l=null;function c(){r=0}function u(e){s=e}function d(){if(null,null!==o.pathList&&null!==i)if(null===o.pathList[i].getPoint(r))switch(u(1),i){case 0:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/right.png" />'),i,BootstrapDialog.show({title:"Guess sign",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=i=1,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Turn Right",action:function(e){t.activeSegment=i=3,c(),u(10),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 1:!function(){var n=e('<div class="decisionPoint"></div>');n.append("What's this cycling sign stand for? <br />"),n.append('<img src="./images/stop.png" />'),i,BootstrapDialog.show({title:"Guess what this means",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=i=2,c(),u(2),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Turn Right",action:function(e){t.activeSegment=i=4,c(),u(2),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 3:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/dooring.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"ride close",action:function(e){t.activeSegment=i=6,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"steer away",action:function(e){t.activeSegment=i=5,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 4:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/left.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=9,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=10,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 8:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/right.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Full stop - turn right when clear",action:function(e){t.activeSegment=i=10,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=i=9,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 5:case 6:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/left.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=8,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=i=7,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 7:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/left.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=13,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=14,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}();break;case 10:!function(){var n=e('<div class="decisionPoint"></div>');n.append('<img src="./images/left.png" />'),i,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=11,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=12,c(),e.close(),setTimeout(d,a),clearTimeout(l),l=null}}]})}()}else setTimeout(d,a)}null!==o.pathList&&setTimeout(d,a),t.activeSegment=i,t.resetSegment=function(){t.activeSegment=i=0},t.getBikeSpeed=function(){return s},t.getPosition=function(){return r},t.setPosition=function(e){r=e}}).call(this,n(0))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,a=null,i=null,r=null,s=null;t.createBike=function(){t.bike=s=new THREE.Object3D,s.mesh=new THREE.Object3D;var e=new THREE.MTLLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,t.back_wheel=o=e,s.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,s.mesh.add(e),t.front_wheel=a=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),s.mesh.add(e),e})}),e.load("assets/pedalsCrankArms.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/pedalsCrankArms.obj",function(e){e.scale.set(.5,.5,.5),e.position.set(.5,-19,-5),t.pedals=r=e,s.mesh.add(e)})}),e.load("assets/riderinpos.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/riderinpos.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI,e.rotation.x=Math.PI,e.rotation.x=Math.PI/2,e.position.set(0,-21,-9),i=e,s.mesh.add(e),s.rider=i})}),s.mesh.wide=1,s.mesh.long=3,s.mesh.position.z=2.2,s.mesh.scale.set(.2,.2,.2)},t.bike=s,t.pedals=r,t.front_wheel=a,t.back_wheel=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,a=null,i=null,r=null,s=null;t.createTown=function(){t.town=o=new THREE.Object3D;var e=new THREE.MTLLoader;e.setTexturePath("assets/"),e.load("assets/road-design.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/road-design.obj",function(e){e.scale.set(24,24,24),e.rotation.x=Math.PI/2,o.add(e)})}),e.setTexturePath("assets/"),e.load("assets/houses-layout.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/houses-layout.obj",function(e){e.scale.set(2,2,2),e.rotation.x=Math.PI/2,o.add(e)})});var n=new THREE.ColladaLoader;n.load("assets/car-low-poly6.dae",function(e){(i=e.scene).scale.set(3,3,3),i.traverse(function(e){if(e instanceof THREE.SkinnedMesh){t.parkedCarDoor=a=e,a.bone=e.skeleton.bones[0];var n=new THREE.CubeGeometry(.5,4,5,1,1,1,1),o=new THREE.MeshBasicMaterial({color:65280,wireframe:!0}),i=new THREE.Mesh(n,o);i.position.set(-110,-170,3),i.long=.5,i.wide=4,a.doorCollider=i}e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.updateMatrix(),i.rotation.z=Math.PI/2,i.rotation.x=0,i.position.set(-110,-175,0),o.add(i)}),e.setTexturePath("assets/"),e.load("assets/yellow2.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/yellow2.obj",function(e){e.scale.set(5,5,5),t.yellowCar=r=e,r.rotation.x=Math.PI/2,r.rotation.y=Math.PI,r.rotation.z=0,r.position.set(-4,100,0),o.add(e)})}),n.load("assets/car-low-red.dae",function(e){t.redCar=s=e.scene,s.scale.x=s.scale.y=s.scale.z=5,s.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),s.updateMatrix(),s.rotation.y=Math.PI,s.rotation.z=0,s.position.set(250,250,0),s.long=8,s.wide=6,o.add(s)})},t.town=o,t.parkedCarDoor=a,t.redCar=s,t.yellowCar=r}]);
//# sourceMappingURL=app.bundle.js.map