!function(e){var t={};function o(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=t,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=7)}([function(e,t){e.exports=jQuery},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PedSegments=t.CarSegments=t.pathList=t.getDP=t.createPaths=void 0;var n=function(e){return e&&e.__esModule?e:{default:e}}(o(2));var a=[],i=[],s={redCar:31,blueCar:32},r={boy1:41,robot1:42},l={DP1:0,DP2:1,DP3:2,DP4:3,DP5:4,DP6:5,DP7:6,DP8:7,DP9:8,DP10:9,DP11:10,DP12:11,DP13:12};function c(e,t,o){a[e]=new THREE.Path,a[e].moveTo(t.x,t.y);for(var i=0;i<o.length;i++)a[e].lineTo(o[i].x,o[i].y);new THREE.Line;return function(e){for(var t=[],o=void 0,i=e<30?n.default.red:n.default.blue,s=0;s<a[e].curves.length;s++)o=new THREE.Vector3(a[e].curves[s].v1.x,a[e].curves[s].v1.y,0),t[s]=new THREE.Vector3(o.x,o.y,0);o=new THREE.Vector3(a[e].curves[a[e].curves.length-1].v2.x,a[e].curves[a[e].curves.length-1].v2.y,0),t[a[e].curves.length]=new THREE.Vector3(o.x,o.y,0);var r=new THREE.Geometry;r.vertices=t;var l=new THREE.LineDashedMaterial({linewidth:1,color:i,dashSize:3,gapSize:3});return new THREE.Line(r,l)}(e)}t.createPaths=function(){var e=[],t=void 0,o=[],n=0;i[l.DP1]=new THREE.Vector3(-160,-165,0),i[l.DP2]=new THREE.Vector3(-160,25,0),i[l.DP3]=new THREE.Vector3(-120,-165,0),i[l.DP4]=new THREE.Vector3(-55,-165,0),i[l.DP5]=new THREE.Vector3(-40,25,0),i[l.DP6]=new THREE.Vector3(100,-165,0),i[l.DP7]=new THREE.Vector3(100,25,0),i[l.DP8]=new THREE.Vector3(-40,25,0),i[l.DP9]=new THREE.Vector3(-160,178,0),i[l.DP10]=new THREE.Vector3(-10,240,0),i[l.DP11]=new THREE.Vector3(-5,178,0),i[l.DP12]=new THREE.Vector3(150,-10,0),i[l.DP13]=new THREE.Vector3(-55,178,0),t=new THREE.Vector3(-250,-240,0),e[0]=new THREE.Vector3(-155,-240,0),e[1]=new THREE.Vector3(-155,-170,0),o[n]=new THREE.Line,o[n]=c(0,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-155,25,0),o[n++]=new THREE.Line,o[n]=c(1,t,e),t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-155,178,0),o[n++]=new THREE.Line,o[n]=c(2,t,e),e=[],t=new THREE.Vector3(-155,-170,0),e[0]=new THREE.Vector3(-120,-170,0),o[n++]=new THREE.Line,o[n]=c(3,t,e),e=[],t=new THREE.Vector3(-155,25,0),e[0]=new THREE.Vector3(-150,25,0),e[1]=new THREE.Vector3(-150,40,0),e[2]=new THREE.Vector3(-55,40,0),o[n++]=new THREE.Line,o[n]=c(4,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-110,-160,0),e[1]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=c(5,t,e),e=[],t=new THREE.Vector3(-120,-170,0),e[0]=new THREE.Vector3(-55,-170,0),o[n++]=new THREE.Line,o[n]=c(6,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(110,-170,0),o[n++]=new THREE.Line,o[n]=c(7,t,e),e=[],t=new THREE.Vector3(-55,-170,0),e[0]=new THREE.Vector3(-30,-170,0),e[1]=new THREE.Vector3(-30,25,0),o[n++]=new THREE.Line,o[n]=c(8,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(-10,25,0),e[2]=new THREE.Vector3(-10,178,0),o[n++]=new THREE.Line,o[n]=c(9,t,e),e=[],t=new THREE.Vector3(-55,25,0),e[0]=new THREE.Vector3(-45,25,0),e[1]=new THREE.Vector3(110,25,0),o[n++]=new THREE.Line,o[n]=c(10,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=c(11,t,e),e=[],t=new THREE.Vector3(110,25,0),e[0]=new THREE.Vector3(150,25,0),e[1]=new THREE.Vector3(150,185,0),e[2]=new THREE.Vector3(250,185,0),o[n++]=new THREE.Line,o[n]=c(12,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(135,-170,0),e[1]=new THREE.Vector3(135,25,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(13,t,e),e=[],t=new THREE.Vector3(100,-170,0),e[0]=new THREE.Vector3(150,-170,0),e[1]=new THREE.Vector3(150,-15,0),o[n++]=new THREE.Line,o[n]=c(14,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-55,178,0),o[n++]=new THREE.Line,o[n]=c(15,t,e),e=[],t=new THREE.Vector3(-160,178,0),e[0]=new THREE.Vector3(-160,240,0),e[1]=new THREE.Vector3(-5,240,0),o[n++]=new THREE.Line,o[n]=c(16,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(17,t,e),e=[],t=new THREE.Vector3(-10,240,0),e[0]=new THREE.Vector3(0,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(18,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(19,t,e),e=[],t=new THREE.Vector3(-5,178,0),e[0]=new THREE.Vector3(-5,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(20,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(150,178,0),e[1]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(21,t,e),e=[],t=new THREE.Vector3(150,-10,0),e[0]=new THREE.Vector3(135,-20,0),e[1]=new THREE.Vector3(135,178,0),e[2]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(22,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(250,178,0),o[n++]=new THREE.Line,o[n]=c(23,t,e),e=[],t=new THREE.Vector3(-55,178,0),e[0]=new THREE.Vector3(-55,240,0),e[1]=new THREE.Vector3(250,240,0),o[n++]=new THREE.Line,o[n]=c(24,t,e),e=[],t=new THREE.Vector3(250,210,0),e[0]=new THREE.Vector3(185,210,0),e[1]=new THREE.Vector3(185,-165,0),e[2]=new THREE.Vector3(115,-165,0),e[3]=new THREE.Vector3(115,60,0),e[4]=new THREE.Vector3(0,60,0),e[5]=new THREE.Vector3(-10,40,0),e[6]=new THREE.Vector3(-165,40,0),e[7]=new THREE.Vector3(-165,188,0),e[8]=new THREE.Vector3(-45,188,0),e[9]=new THREE.Vector3(-45,40,0),e[10]=new THREE.Vector3(125,40,0),e[11]=new THREE.Vector3(125,188,0),e[12]=new THREE.Vector3(250,188,0),o[n++]=new THREE.Line,o[n]=c(s.redCar,t,e),e=[],t=new THREE.Vector3(-250,-160,0),e[0]=new THREE.Vector3(128,-160,0),e[1]=new THREE.Vector3(128,210,0),e[2]=new THREE.Vector3(-185,210,0),e[3]=new THREE.Vector3(-185,-250,0),o[n++]=new THREE.Line,o[n]=c(s.blueCar,t,e);var a=10*Math.random();return e=[],t=new THREE.Vector3(160-a,-130,0),e[0]=new THREE.Vector3(160-a,170,0),e[1]=new THREE.Vector3(159-a,170,0),e[2]=new THREE.Vector3(159-a,-130,0),e[3]=new THREE.Vector3(160-a,-130,0),o[n++]=new THREE.Line,o[n]=c(r.boy1,t,e),e=[],t=new THREE.Vector3(-150,245-a,0),e[0]=new THREE.Vector3(220,245-a,0),e[1]=new THREE.Vector3(220,244-a,0),e[2]=new THREE.Vector3(-150,244-a,0),e[3]=new THREE.Vector3(-150,245-a,0),o[n++]=new THREE.Line,o[n]=c(r.robot1,t,e),o},t.getDP=function(e){return e>=1&&e<=l.DP13?i[e-1]:null},t.pathList=a,t.CarSegments=s,t.PedSegments=r},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createBike=function(){t.bike=n=new THREE.Object3D,n.mesh=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.JSONLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,n.back_wheel=e,n.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,n.mesh.add(e),n.front_wheel=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),n.mesh.add(e)})}),o.load("./assets/low-poly-cycle.json",function(e,t){t.forEach(function(e){e.skinning=!0}),n.rider=new THREE.SkinnedMesh(e,t),n.rider.scale.set(8,8,8),n.rider.position.set(0,-19,-10),n.rider.rotation.y=Math.PI,n.rider.rotation.x=Math.PI/2,n.mesh.add(n.rider),n.mixer=new THREE.AnimationMixer(n.rider),n.anim=n.mixer.clipAction(e.animations[1]),n.anim.setEffectiveWeight(1),n.anim.enabled=!0,n.anim.play(),n.anim.paused=!0,n.anim.timeScale=2,n.anim.paused=!1}),n.mesh.wide=1,n.mesh.long=3,n.mesh.position.z=2.2,n.mesh.scale.set(.2,.2,.2)},t.bike=n},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,i=null,s=null;t.createCameras=function(e,o){var r=window.innerWidth/window.innerHeight;t.orbitControls=s=new THREE.Object3D,t.trailingCamera=a=new THREE.PerspectiveCamera(70,r,1,1e3),a.position.set(0,-250,50),n=a,s.tcontrols=new THREE.OrbitControls(a,o.domElement),s.tcontrols.maxPolarAngle=Math.PI,s.tcontrols.minPolarAngle=2.4,s.tcontrols.maxAzimuthAngle=Math.PI/6,s.tcontrols.minAzimuthAngle=-Math.PI/6,s.tcontrols.minDistance=50,s.tcontrols.maxDistance=250,s.tcontrols.enableDamping=!0,s.tcontrols.dampingFactor=.25,s.tcontrols.enableZoom=!0,s.tcontrols.update(),t.hoveringCamera=i=new THREE.PerspectiveCamera(45,r,1,1e3),i.position.set(0,350,450),i.lookAt(e.position),s.hcontrols=new THREE.OrbitControls(i,o.domElement),s.hcontrols.maxPolarAngle=1.4,s.hcontrols.minPolarAngle=Math.PI/4,s.hcontrols.maxAzimuthAngle=Math.PI/2,s.hcontrols.minAzimuthAngle=-Math.PI/2,s.hcontrols.minDistance=50,s.hcontrols.maxDistance=400,s.hcontrols.enableDamping=!0,s.hcontrols.dampingFactor=.25,s.hcontrols.enableZoom=!0,s.hcontrols.update()},t.getActiveCamera=function(){return n},t.setActiveCamera=function(e){n=e},t.hoveringCamera=i,t.trailingCamera=a,t.orbitControls=s},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null;t.createLight=function(e){var t,o;n=new THREE.HemisphereLight(11184810,0,4),t=new THREE.AmbientLight(1118481,6),o=new THREE.DirectionalLight(16777215,.9),e.add(n),e.add(o),e.add(t)},t.setHLIntensity=function(e){n.intensity=e}},function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=null,a=null,i=void 0,s=null,r=null;function l(e,t,o){return e.mixer=new THREE.AnimationMixer(e),e.anim=e.mixer.clipAction(t),e.anim.setEffectiveWeight(1),e.anim.enabled=!0,e.anim.play(),e.anim.timeScale=o,e.anim.paused=!1,e}t.createTown=function(){t.town=n=new THREE.Object3D,t.cars=i=new THREE.Object3D,t.pedestrians=r=new THREE.Object3D;var e=new THREE.MTLLoader,o=new THREE.ColladaLoader;e.setTexturePath("assets/"),e.load("assets/road-design.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/road-design.obj",function(e){e.scale.set(24,24,24),e.rotation.x=Math.PI/2,n.add(e)})}),e.setTexturePath("assets/"),e.load("assets/houses-layout.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/houses-layout.obj",function(e){e.scale.set(2,2,2),e.rotation.x=Math.PI/2,n.add(e)})}),e.load("assets/stop_sign.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/stop_sign.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-145,-178,-1);var t=e.clone();t.position.set(-55,-178,-1),t.rotation.y=-Math.PI,n.add(e),n.add(t)})}),e.load("assets/dp1-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp1-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,-165,-1),n.dp1Arrows=e;var t=e.clone();t.position.set(-160,25,-1),n.dp2Arrows=t,n.add(e),n.add(t)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp12-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp12-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(140,-10,-1),n.dp12Arrows=e,n.add(e)})}),e.load("assets/dp13-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp13-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,178,-1),n.dp13Arrows=e,n.add(e)})}),e.load("assets/dp3-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp3-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-120,-170,-1),n.dp3Arrows=e,n.add(e)})}),e.load("assets/dp10-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp10-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-10,240,-1),n.dp10Arrows=e,n.add(e)})}),e.load("assets/dp9-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp9-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-160,178,-1),n.dp9Arrows=e;var t=e.clone();t.position.set(-5,178,-1),n.dp11Arrows=t;var o=e.clone();o.position.set(-40,25,-1),n.dp5Arrows=o,n.add(e),n.add(t),n.add(o)})}),e.load("assets/dp4-arrows.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/dp4-arrows.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI/2,e.position.set(-55,-165,-1),n.dp4Arrows=e;var t=e.clone();t.position.set(100,25,-1),n.dp7Arrows=t;var o=e.clone();o.position.set(100,-165,-1),n.dp6Arrows=o;var a=e.clone();a.position.set(-60,35,-1),n.dp8Arrows=a,n.add(e),n.add(t),n.add(o),n.add(a)})}),e.load("assets/donotenter_sign.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/donotenter_sign.obj",function(e){e.scale.set(1,1,1),e.rotation.x=Math.PI/2,e.rotation.y=-Math.PI,e.position.set(-145,16,-1);var t=e.clone();t.position.set(-145,58,-1),n.add(e),n.add(t)})}),e.load("assets/one-way.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/one-way.obj",function(e){e.scale.set(8,8,8),e.rotation.x=Math.PI/2,e.rotation.y=0,e.position.set(-110,35,0);var t=e.clone();t.position.set(-40,-60,.5),t.rotation.y=-Math.PI/2,n.add(e),n.add(t)})}),o.load("assets/car-low-poly6.dae",function(e){(s=e.scene).scale.set(3,3,3),s.traverse(function(e){if(e instanceof THREE.SkinnedMesh){t.parkedCarDoor=a=e,a.bone=e.skeleton.bones[0];var o=new THREE.CubeGeometry(.5,4,5,1,1,1,1),n=new THREE.MeshBasicMaterial({color:65280,wireframe:!0}),i=new THREE.Mesh(o,n);i.position.set(-110,-172,3),i.long=.5,i.wide=1,a.doorCollider=i}e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),s.updateMatrix(),s.rotation.z=Math.PI/2,s.rotation.x=0,s.position.set(-110,-175,0),n.add(s)}),e.setTexturePath("assets/"),e.load("assets/yellow2.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/yellow2.obj",function(e){e.scale.set(5,5,5),i.yellowCar=e,i.yellowCar.rotation.x=Math.PI/2,i.yellowCar.rotation.y=Math.PI,i.yellowCar.rotation.z=0,i.yellowCar.position.set(-4,100,0),n.add(e)})}),o.load("assets/car-low-red.dae",function(e){i.redCar=e.scene,i.redCar.scale.x=i.redCar.scale.y=i.redCar.scale.z=5,i.redCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.redCar.updateMatrix(),i.redCar.rotation.y=Math.PI,i.redCar.rotation.z=0,i.redCar.position.set(250,250,0),i.redCar.long=8,i.redCar.wide=6,n.add(i.redCar)}),o.load("assets/car-low-blue.dae",function(e){i.blueCar=e.scene,i.blueCar.scale.x=i.blueCar.scale.y=i.blueCar.scale.z=5,i.blueCar.traverse(function(e){e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.blueCar.updateMatrix(),i.blueCar.rotation.y=Math.PI,i.blueCar.rotation.z=0,i.blueCar.position.set(250,250,0),i.blueCar.long=8,i.blueCar.wide=6,n.add(i.blueCar)}),function(){var e=new THREE.JSONLoader;e.load("./assets/dooring.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(2,2,2),o.position.set(-110,-180,0),o.rotation.x=Math.PI/2,o.rotation.y=-Math.PI,n.add(o),n.billBoard=l(o,e.animations[1],.5)}),e.load("./assets/low-poly-boy-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(160,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingBoy=l(o,e.animations[0],2);var a=o.clone();a.position.set(-115,-110,0),a.rotation.y=-Math.PI,a.wide=2,a.long=2,n.add(a),r.walkingBoy1=l(a,e.animations[0],.12)}),e.load("./assets/low-poly-girl-walk.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(1,1,1),o.position.set(155,0,1),o.rotation.y=Math.PI,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.walkingGirl=l(o,e.animations[0],2)}),e.load("./assets/robot-rig3.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,240,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot=l(o,e.animations[3],1)}),e.load("./assets/robot-rig4.json",function(e,t){t.forEach(function(e){e.skinning=!0});var o=new THREE.SkinnedMesh(e,t);o.scale.set(5,5,5),o.position.set(0,245,1),o.rotation.y=Math.PI/2,o.rotation.x=Math.PI/2,o.wide=2,o.long=2,n.add(o),r.runningRobot1=l(o,e.animations[3],1.2)})}()},t.town=n,t.parkedCarDoor=a,t.cars=i,t.pedestrians=r},function(e,t,o){"use strict";!function(e){e&&e.__esModule}(o(8))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.init=z;var n=w(o(9)),a=o(10),i=o(1),s=w(o(2)),r=o(11),l=o(3),c=o(6),d=o(4),E=o(5);function w(e){return e&&e.__esModule?e:{default:e}}var u=void 0,p=void 0,g=0,b=0,f=0,R=new THREEx.KeyboardState,h=.1,T=.05,m=null,H=!1,y=new THREE.Clock,v=null,P=null,C=!1,V=!1,M=!0,k=!0,B=0;function x(e,t){return e.position.x<t.position.x+t.wide&&e.position.x+e.wide>t.position.x&&e.position.y<t.position.y+t.long&&e.long+e.position.y>t.position.y}function A(){BootstrapDialog.show({title:"Game Over!",message:"Ready to Restart the Game?",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Game",action:function(e){location.reload(),H=!1,e.close(),H=!1}},{label:"Leave Game",action:function(e){cancelAnimationFrame(m),e.close(),H=!0}}]}),H=!0}function D(e){if(null!==i.pathList){var t=(0,r.getPosition)();t+=.002*(0,r.getBikeSpeed)(),(0,r.setPosition)(t);var o=i.pathList[e].getPoint((0,r.getPosition)());if(null!==o&&null!==l.bike&&null!==l.bike.mesh){v.destroy(),P.destroy(),l.bike.mesh.position.x=o.x,l.bike.mesh.position.y=o.y;var n=S(e,(0,r.getPosition)());n>0&&(n=-Math.PI+n);var a=new THREE.Vector3(0,0,1);l.bike.mesh.quaternion.setFromAxisAngle(a,n),l.bike.mesh.children.length>4&&(l.bike.front_wheel.rotation.x-=.1,l.bike.back_wheel.rotation.x-=.1,function(e){!0===x(l.bike.mesh,c.cars.redCar)&&(console.log("Hit Red Car!"),A()),!0===x(l.bike.mesh,c.cars.blueCar)&&(console.log("Hit Blue Car!"),A()),!0===x(l.bike.mesh,c.pedestrians.walkingBoy)&&(console.log("Hit Boy!"),A()),!0===x(l.bike.mesh,c.pedestrians.walkingGirl)&&(console.log("Hit Girl!"),A()),!0===x(l.bike.mesh,c.pedestrians.runningRobot)&&(console.log("Hit Running Robot!"),A()),!0===x(l.bike.mesh,c.pedestrians.runningRobot1)&&(console.log("Hit Running Robot1!"),A()),null!==c.parkedCarDoor&&(6===e?(Math.random()<.005&&(c.parkedCarDoor.bone.rotation.z=-1.5,c.parkedCarDoor.doorCollider.position.y=-170),x(l.bike.mesh,c.parkedCarDoor.doorCollider)&&(console.log("Hit Car Door!"),A())):(c.parkedCarDoor.bone.rotation.z=0,c.parkedCarDoor.doorCollider.position.y=-172))}(e))}}}function L(e,t){if(null!==t){g+=.0015*h;var o=i.pathList[e].getPoint(g);if(null!==o){if(e===i.CarSegments.blueCar){if(B>0&&B<80)return void B++;if(B>=80&&(B=0),o.x+60<1&&o.x+60>0&&-165===o.y)return void(B=1)}t.position.x=o.x,t.position.y=o.y;var n=new THREE.Vector3(0,0,1),a=S(e,g);a=a>0?-Math.PI+a:Math.PI+a,t.quaternion.setFromAxisAngle(n,a)}else g=0}}function S(e,t){var o=i.pathList[e].getTangent(t).normalize();return-Math.atan(o.x/o.y)}function I(){if(!0!==H){var e=r.activeSegment;L(i.CarSegments.redCar,c.cars.redCar),L(i.CarSegments.blueCar,c.cars.blueCar),D(e),function(){var e=i.PedSegments.boy1,t=i.PedSegments.robot1;if(null!==c.pedestrians){b+=.002*T,f+=.005*T;var o=i.pathList[e].getPoint(b),n=i.pathList[t].getPoint(f);if(null!==o)if(null!==n){var a=c.pedestrians.walkingBoy.position.y,s=c.pedestrians.runningRobot.position.x;0!=a&&(a>o.y&&!1===C?(c.pedestrians.walkingBoy.rotation.y=0,c.pedestrians.walkingGirl.rotation.y=0,C=!0,M=!1):a<o.y&&!1===M&&(c.pedestrians.walkingBoy.rotation.y=Math.PI,c.pedestrians.walkingGirl.rotation.y=Math.PI,C=!1,M=!0)),0!=s&&(s>n.x&&!1===V?(c.pedestrians.runningRobot.rotation.y=3*Math.PI/2,c.pedestrians.runningRobot1.rotation.y=3*Math.PI/2,V=!0,k=!1):s<n.x&&!1===k&&(c.pedestrians.runningRobot.rotation.y=Math.PI/2,c.pedestrians.runningRobot1.rotation.y=Math.PI/2,V=!1,k=!0)),c.pedestrians.walkingBoy.position.x=o.x,c.pedestrians.walkingGirl.position.x=o.x-5,c.pedestrians.walkingBoy.position.y=c.pedestrians.walkingGirl.position.y=o.y,c.pedestrians.runningRobot.position.x=n.x,c.pedestrians.runningRobot1.position.x=n.x,c.pedestrians.runningRobot.position.y=n.y,c.pedestrians.runningRobot1.position.y=n.y-5}else f=0;else b=0}}(),m=requestAnimationFrame(I),function(){d.orbitControls.hcontrols.update(),d.orbitControls.tcontrols.update(),R.pressed("1")&&(0,d.setActiveCamera)(d.hoveringCamera),R.pressed("2")&&(0,d.setActiveCamera)(d.trailingCamera);var e=(0,d.getActiveCamera)();e&&u.render(p,e);var t=y.getDelta();l.bike.mixer&&l.bike.mixer.update(t),c.town.billBoard&&c.town.billBoard.mixer&&c.town.billBoard.mixer.update(t),c.pedestrians.walkingBoy&&c.pedestrians.walkingBoy.mixer&&c.pedestrians.walkingBoy.mixer.update(t),c.pedestrians.walkingBoy1&&c.pedestrians.walkingBoy1.mixer&&c.pedestrians.walkingBoy1.mixer.update(t),c.pedestrians.walkingGirl&&c.pedestrians.walkingGirl.mixer&&c.pedestrians.walkingGirl.mixer.update(t),c.pedestrians.runningRobot&&c.pedestrians.runningRobot.mixer&&c.pedestrians.runningRobot.mixer.update(t),c.pedestrians.runningRobot1&&c.pedestrians.runningRobot1.mixer&&c.pedestrians.runningRobot1.mixer.update(t)}()}}function z(){!function(){var e=window.innerHeight,t=window.innerWidth;(p=new THREE.Scene).fog=new THREE.Fog(s.default.white,100,1e3),p.add((0,n.default)(100)),p.rotation.z+=Math.PI/2,p.rotation.x-=Math.PI/2,(u=new THREE.WebGLRenderer({alpha:!0,antialias:!0})).setSize(t,e),u.shadowMap.enabled=!0,u.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(u.domElement),v=lottie.loadAnimation({container:document.getElementById("logo"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_rs.json"}),P=lottie.loadAnimation({container:document.getElementById("bike"),renderer:"svg",loop:!0,autoplay:!0,path:"js/data_bike.json"}),(0,a.infoButton)()}(),(0,d.createCameras)(p,u,l.bike),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),o=new THREE.Mesh(t,e),n=new THREE.Object3D;n.add(o),p.add(n)}(),(0,E.createLight)(p),(0,c.createTown)(),p.add(c.town),(0,l.createBike)(),p.add(l.bike.mesh),l.bike.mesh.add(d.trailingCamera),(0,d.setActiveCamera)(d.trailingCamera);var t;t=(0,i.createPaths)();for(var o=0;o<t.length;o++)p.add(t[o]);!function(){var t=e('<div class="welcomeDialog"></div>');t.append('<img src="./images/dialog.png" />'),t.append("<p> In this level, the user is prompted to choose alternate paths for the cyclist.                         The objective of the game to \n make it to the end without a crash.</p>"),t.append('<div class="row">                           <div class="border col-md-6 boxlayout">                              <ul> Sample Interactions:                                <li> Scene 1: Cyclist stops at intersection. The user decides between going straight or turning right.</li>                                <li> Scene 2: the user is prompted to choose between passing close or away from the parked car. </li>                                <li> Scene 3: the user is prompted to choose between going straight or turning left against traffic</li>                               <li> Scene 4: The Cyclist crashes into incoming car and game ends</li>                              </ul>                           </div>                           <div class="border col-md-6 boxlayout">                             <ul> Controls:                               <li> To Choose the Top Hovering Camera, Press 1 (Mobile TBD)</li>                               <li> To Choose the Trailing Camera, Press 2 (Mobile TBD)</li>                               <li> To Zoom in and Out, use middle mouse wheel(Mobile TBD)</li>                               <li> To Rotate around the Z axis, use left mouse button(Mobile TBD)</li>                               <li> To move the Camera around, use right mouse button (Mobile TBD)</li>                             </ul>                           </div>                         </div>'),BootstrapDialog.show({title:"Ride Safely Interactive",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Start Game",action:function(e){e.close(),I()}},{label:"Quit Game",action:function(e){e.close()}}]})}(),H=!1}window.addEventListener("load",z,!1)}).call(this,o(0))},function(e,t,o){"use strict";function n(e,t,o,n){var a=new THREE.Geometry,i=void 0;i=n?new THREE.LineDashedMaterial({color:o,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:o}),a.vertices.push(e.clone()),a.vertices.push(t.clone());var s=new THREE.Line(a,i,THREE.LineSegments);return s.computeLineDistances(),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(n(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.infoButton=function(){e("a").css({"z-index":"2",background:"rgba(0,0,0,0)",opacity:"0.9",position:"fixed",title:"Press '1' for Top Camera, '2' for Chase Camera."}).append("<img width='42' height='42' src='images/infoButton.png'/>").tooltip({disabled:!0,close:function(t,o){e(this).tooltip("disable")}}),e("a").on("click",function(){e(this).tooltip("enable").tooltip("open")})}}).call(this,o(0))},function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.getBikeSpeed=t.resetPosition=t.resetSegment=t.activeSegment=void 0;var n=o(1),a=o(3),i=o(4),s=o(5),r=o(6),l=2e3,c=0,d=0,E=1,w=null;function u(){d=0}function p(e){E=e}function g(){if(null,null!==n.pathList&&null!==c)if(null===n.pathList[c].getPoint(d))switch(p(1),(0,s.setHLIntensity)(6),a.bike.anim.paused=!0,(0,i.setActiveCamera)(i.trailingCamera),c){case 0:!function(){var t=e("<div></div>");t.append('<img src="./images/right.png" />'),c,r.town.dp1Arrows.position.z=1;BootstrapDialog.show({title:"Guess sign",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){b(e,1),r.town.dp1Arrows.position.z=-1}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){b(e,3,10),r.town.dp1Arrows.position.z=-1}}]})}();break;case 1:!function(){var t=e('<div class="decisionPoint"></div>');t.append("What's this cycling sign stand for? <br />"),t.append('<img src="./images/stop.png" />'),c,r.town.dp2Arrows.position.z=1,BootstrapDialog.show({title:"Guess what this means",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-primary",action:function(e){b(e,2,2),r.town.dp2Arrows.position.z=-1}},{label:"Turn Right",cssClass:"btn-danger",action:function(e){b(e,4,2),r.town.dp2Arrows.position.z=-1}}]})}();break;case 3:!function(){var t=e('<div class="decisionPoint"></div>');t.append("Caution: potential car door opening! <br />"),c,r.town.dp3Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",cssClass:"decisionPoint1",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue Straight",cssClass:"btn-danger",action:function(e){b(e,6),r.town.dp3Arrows.position.z=-1}},{label:"Steer Away",cssClass:"btn-primary",action:function(e){b(e,5),r.town.dp3Arrows.position.z=-1}}]})}();break;case 4:!function(){var t=e('<div class="decisionPoint"></div>');t.append('<img src="./images/left.png" />'),c,r.town.dp8Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){b(e,9),r.town.dp8Arrows.position.z=-1}},{label:"Continue Straight to Sidewalk",cssClass:"btn-danger",action:function(e){b(e,10),r.town.dp8Arrows.position.z=-1}}]})}();break;case 8:!function(){var t=e('<div class="decisionPoint"></div>');t.append('<img src="./images/right.png" />'),c,r.town.dp5Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Right",cssClass:"btn-primary",action:function(e){b(e,10),r.town.dp5Arrows.position.z=-1}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){b(e,9),own.dp5Arrows.position.z=-1}}]})}();break;case 5:case 6:!function(){var t=e('<div class="decisionPoint"></div>');t.append('<img src="./images/left.png" />'),c,r.town.dp4Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",cssClass:"decisionPoint2",message:t,closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){b(e,8),r.town.dp4Arrows.position.z=-1}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){b(e,7),r.town.dp4Arrows.position.z=-1}}]})}();break;case 7:!function(){var t=e('<div class="decisionPoint"></div>');t.append('<img src="./images/left.png" />'),c,r.town.dp6Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){b(e,13),r.town.dp6Arrows.position.z=-1}},{label:"Continue Straight",cssClass:"btn-danger",action:function(e){b(e,14),r.town.dp6Arrows.position.z=-1}}]})}();break;case 10:!function(){var t=e('<div class="decisionPoint"></div>');t.append('<img src="./images/left.png" />'),c,r.town.dp7Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Turn Left",cssClass:"btn-primary",action:function(e){b(e,11),r.town.dp7Arrows.position.z=-1}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){b(e,12),r.town.dp7Arrows.position.z=-1}}]})}();break;case 2:!function(){var t=e('<div class="decisionPoint"></div>');c,r.town.dp9Arrows.position.z=1,BootstrapDialog.show({title:"Defensive Riding: Heavy Traffic Alert!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Road",cssClass:"btn-primary",action:function(e){b(e,15),r.town.dp9Arrows.position.z=-1}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){b(e,16),r.town.dp9Arrows.position.z=-1}}]})}();break;case 9:!function(){var t=e('<div class="decisionPoint"></div>');c,r.town.dp11Arrows.position.z=1,BootstrapDialog.show({title:"Pedestrians Alert VS Heavy Traffic Alert!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){b(e,19),r.town.dp11Arrows.position.z=-1}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){b(e,20),r.town.dp11Arrows.position.z=-1}}]})}();break;case 15:!function(){var t=e('<div class="decisionPoint"></div>');c,r.town.dp13Arrows.position.z=1,BootstrapDialog.show({title:"Pedestrians Alert VS Heavy Traffic Alert!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Roadside",cssClass:"btn-primary",action:function(e){b(e,23),r.town.dp13Arrows.position.z=-1}},{label:"Cross to Sidewalk",cssClass:"btn-danger",action:function(e){b(e,24),r.town.dp13Arrows.position.z=-1}}]})}();break;case 14:!function(){var t=e('<div class="decisionPoint"></div>');c,r.town.dp12Arrows.position.z=1,BootstrapDialog.show({title:"Pedestrians Alert VS Heavy Traffic Alert!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){b(e,21),r.town.dp12Arrows.position.z=-1}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){b(e,22),r.town.dp12Arrows.position.z=-1}}]})}();break;case 16:!function(){var t=e('<div class="decisionPoint"></div>');c,r.town.dp10Arrows.position.z=1,BootstrapDialog.show({title:"Pedestrians Alert VS Heavy Traffic Alert!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Continue on Sidewalk",cssClass:"btn-danger",action:function(e){b(e,17),r.town.dp10Arrows.position.z=-1}},{label:"Cross to Roadside",cssClass:"btn-primary",action:function(e){b(e,18),r.town.dp10Arrows.position.z=-1}}]})}();break;case 11:case 12:case 13:case 17:case 18:case 19:case 20:case 21:case 22:case 23:case 24:default:!function(){var t=e('<div class="decisionPoint"></div>');c,BootstrapDialog.show({title:"Successful Completion!",message:t,cssClass:"decisionPoint2",closeByBackdrop:!1,closeByKeyboard:!1,buttons:[{label:"Restart Cycling Journey",cssClass:"btn-success",action:function(e){b(e,0)}},{label:"Leave Game",cssClass:"btn-danger",action:function(e){e.close()}}]})}()}else setTimeout(g,l)}function b(e,o,n){t.activeSegment=c=o,u(),e.close(),setTimeout(g,l),clearTimeout(w),w=null,n&&p(n),a.bike.anim.paused=!1,(0,s.setHLIntensity)(4)}null!==n.pathList&&setTimeout(g,l),t.activeSegment=c,t.resetSegment=function(){t.activeSegment=c=0},t.resetPosition=u,t.getBikeSpeed=function(){return E},t.getPosition=function(){return d},t.setPosition=function(e){d=e}}).call(this,o(0))}]);
//# sourceMappingURL=app.bundle.js.map