!function(e){var t={};function n(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,n),a.l=!0,a.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)n.d(o,a,function(t){return e[t]}.bind(null,a));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pathList=t.createPaths=void 0;var o=function(e){return e&&e.__esModule?e:{default:e}}(n(1));var a=[];function i(e,t,n){a[e]=new THREE.Path,a[e].moveTo(t.x,t.y);for(var i=0;i<n.length;i++)a[e].lineTo(n[i].x,n[i].y);new THREE.Line;return function(e){for(var t=a[e].getSpacedPoints(20),n=0;n<t.length;n++){var i=t[n];t[n]=new THREE.Vector3(i.x,i.y,0)}var s=new THREE.Geometry;s.vertices=t;var r=new THREE.LineDashedMaterial({linewidth:1,color:o.default.red,dashSize:3,gapSize:3});return new THREE.Line(s,r)}(e)}t.createPaths=function(){var e=[],t=void 0,n=[];return t=new THREE.Vector3(-250,-240,0),e[0]=new THREE.Vector3(-160,-240,0),e[1]=new THREE.Vector3(-160,-170,0),n[0]=new THREE.Line,n[0]=i(0,t,e),e=[],t=new THREE.Vector3(-160,-170,0),e[0]=new THREE.Vector3(-160,35,0),n[1]=new THREE.Line,n[1]=i(1,t,e),t=new THREE.Vector3(-160,35,0),e[0]=new THREE.Vector3(-160,185,0),e[1]=new THREE.Vector3(250,185,0),n[2]=new THREE.Line,n[2]=i(2,t,e),e=[],t=new THREE.Vector3(-160,-170,0),e[0]=new THREE.Vector3(-135,-170,0),n[3]=new THREE.Line,n[3]=i(3,t,e),e=[],t=new THREE.Vector3(-160,35,0),e[0]=new THREE.Vector3(-40,35,0),n[4]=new THREE.Line,n[4]=i(4,t,e),e=[],t=new THREE.Vector3(-135,-170,0),e[0]=new THREE.Vector3(-110,-155,0),e[1]=new THREE.Vector3(-40,-170,0),n[5]=new THREE.Line,n[5]=i(5,t,e),e=[],t=new THREE.Vector3(-135,-170,0),e[0]=new THREE.Vector3(-40,-170,0),n[6]=new THREE.Line,n[6]=i(6,t,e),e=[],t=new THREE.Vector3(-40,-170,0),e[0]=new THREE.Vector3(110,-170,0),n[7]=new THREE.Line,n[7]=i(7,t,e),e=[],t=new THREE.Vector3(-40,-170,0),e[0]=new THREE.Vector3(-40,35,0),n[8]=new THREE.Line,n[8]=i(8,t,e),e=[],t=new THREE.Vector3(-40,35,0),e[0]=new THREE.Vector3(-10,35,0),e[1]=new THREE.Vector3(-10,185,0),e[2]=new THREE.Vector3(250,185,0),n[9]=new THREE.Line,n[9]=i(9,t,e),e=[],t=new THREE.Vector3(-40,35,0),e[0]=new THREE.Vector3(110,35,0),n[10]=new THREE.Line,n[10]=i(10,t,e),e=[],t=new THREE.Vector3(110,35,0),e[0]=new THREE.Vector3(110,185,0),e[1]=new THREE.Vector3(250,185,0),n[11]=new THREE.Line,n[11]=i(11,t,e),e=[],t=new THREE.Vector3(110,35,0),e[0]=new THREE.Vector3(185,35,0),e[1]=new THREE.Vector3(185,185,0),e[2]=new THREE.Vector3(250,185,0),n[12]=new THREE.Line,n[12]=i(12,t,e),e=[],t=new THREE.Vector3(110,-170,0),e[0]=new THREE.Vector3(110,35,0),e[1]=new THREE.Vector3(110,185,0),e[2]=new THREE.Vector3(250,185,0),n[13]=new THREE.Line,n[13]=i(13,t,e),e=[],t=new THREE.Vector3(110,-170,0),e[0]=new THREE.Vector3(185,-170,0),e[1]=new THREE.Vector3(185,185,0),e[2]=new THREE.Vector3(250,185,0),n[14]=new THREE.Line,n[14]=i(14,t,e),n},t.pathList=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default={red:12982789,white:14209233,brown:5845806,pink:16097522,brownDark:2300175,lightblue:8445951,blue:255,orange:16540977,beige:15453604,grey:3158064,yellow:16776986}},function(e,t,n){"use strict";!function(e){e&&e.__esModule}(n(3))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.init=h;var o=l(n(4)),a=n(0),i=l(n(1)),s=n(5),r=n(7),c=n(8);function l(e){return e&&e.__esModule?e:{default:e}}var d=void 0,u=void 0,E=void 0,w=void 0;function f(e){if(null!==a.pathList){var t=(0,s.getPosition)();t+=.002*s.speed,(0,s.setPosition)(t);var n=a.pathList[e].getPoint((0,s.getPosition)());if(null!==n&&null!==r.bike&&null!==r.bike.mesh){null!==c.parkedCarDoor&&(c.parkedCarDoor.rotation.z=6===e?-1.5:0),r.bike.mesh.position.x=n.x,r.bike.mesh.position.y=n.y;var o=function(e,t){var n=a.pathList[e].getTangent(t).normalize();return-Math.atan(n.x/n.y)}(e,(0,s.getPosition)());o>0&&(o=-Math.PI+o);var i=new THREE.Vector3(0,0,1);r.bike.mesh.quaternion.setFromAxisAngle(i,o),r.bike.mesh.children.length>3&&(r.pedals.rotation.x-=.1,r.front_wheel.rotation.x-=.1,r.back_wheel.rotation.x-=.1)}}}function p(){f(s.activeSegment),requestAnimationFrame(p),w.update(),d.render(u,E)}function h(){!function(){var e=window.innerHeight,t=window.innerWidth;(u=new THREE.Scene).fog=new THREE.Fog(i.default.white,100,1e3),u.add((0,o.default)(100)),u.rotation.z+=Math.PI/2,u.rotation.x-=Math.PI/2,(d=new THREE.WebGLRenderer({alpha:!0,antialias:!1})).setSize(t,e),d.shadowMap.enabled=!0,d.setPixelRatio(window.devicePixelRatio),document.getElementById("townId").appendChild(d.domElement);var n=t/e;(E=new THREE.PerspectiveCamera(45,n,1,1e4)).position.set(-50,250,450),(w=new THREE.OrbitControls(E,d.domElement)).enableDamping=!0,w.dampingFactor=.25,w.enableZoom=!0,w.update()}(),function(){var e=new THREE.MeshBasicMaterial({wireframe:!0,color:0}),t=new THREE.PlaneGeometry(500,500,20,20),n=new THREE.Mesh(t,e),o=new THREE.Object3D;o.add(n),u.add(o)}(),function(){var e,t=void 0;e=new THREE.HemisphereLight(11184810,0,.9),(t=new THREE.DirectionalLight(16777215,.9)).position.set(150,350,350),t.castShadow=!0,t.shadow.camera.left=-400,t.shadow.camera.right=400,t.shadow.camera.top=400,t.shadow.camera.bottom=-400,t.shadow.camera.near=1,t.shadow.camera.far=1e3,t.shadow.mapSize.width=2048,t.shadow.mapSize.height=2048,u.add(e),u.add(t)}(),(0,c.createTown)(),u.add(c.town),(0,r.createBike)(),u.add(r.bike.mesh);var e;e=(0,a.createPaths)();for(var t=0;t<e.length;t++)u.add(e[t]);p()}window.addEventListener("load",h,!1)},function(e,t,n){"use strict";function o(e,t,n,o){var a=new THREE.Geometry,i=void 0;i=o?new THREE.LineDashedMaterial({color:n,dashSize:3,gapSize:3}):new THREE.LineBasicMaterial({color:n}),a.vertices.push(e.clone()),a.vertices.push(t.clone());var s=new THREE.Line(a,i,THREE.LineSegments);return s.computeLineDistances(),s}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){e=e||200;var t=new THREE.Object3D;return t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(e,0,0),16711680,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(-e,0,0),16711680,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,e,0),65280,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,-e,0),65280,!0)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,e),255,!1)),t.add(o(new THREE.Vector3(0,0,0),new THREE.Vector3(0,0,-e),255,!0)),t}},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.setPosition=t.getPosition=t.speed=t.activeSegment=void 0;var o=n(0),a=2e3,i=0,s=0,r=1;function c(){s=0}function l(e){t.speed=r=e}function d(){if(null!==o.pathList&&null!==i)if(null===o.pathList[i].getPoint(s))switch(t.speed=r=1,i){case 0:!function(){var n=e("<div></div>");n.append("What's this cycling sign stand for? <br />"),n.append('<img src="./images/right.png" />'),BootstrapDialog.show({title:"Guess what this means",message:n,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=i=1,c(),e.close(),setTimeout(d,a)}},{label:"Turn Right",action:function(e){t.activeSegment=i=3,c(),l(10),e.close(),setTimeout(d,a)}}]})}();break;case 1:!function(){var n=e("<div></div>");n.append("What's this cycling sign stand for? <br />"),n.append('<img src="./images/stop1.png" />'),n.append("Cautious going straight: busy traffic road ahead! <br />"),n.append("Cautious turning right: traffic violation - entering one-way road against traffic! <br />"),BootstrapDialog.show({title:"Guess what this means",message:n,buttons:[{label:"Continue Straight",action:function(e){t.activeSegment=i=2,c(),l(2),e.close(),setTimeout(d,a)}},{label:"Turn Right",action:function(e){t.activeSegment=i=4,c(),l(2),e.close(),setTimeout(d,a)}}]})}();break;case 3:!function(){var n=e("<div></div>");n.append("Caution: don't crash into car door opening! <br />"),n.append('<img src="./images/dooring.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"ride close",action:function(e){t.activeSegment=i=6,c(),e.close(),setTimeout(d,a)}},{label:"steer away",action:function(e){t.activeSegment=i=5,c(),e.close(),setTimeout(d,a)}}]})}();break;case 4:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic laws - Get Back on Track! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=9,c(),e.close(),setTimeout(d,a)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=10,c(),e.close(),setTimeout(d,a)}}]})}();break;case 8:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Stop and check for traffic! <br />"),n.append('<img src="./images/right.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn right when clear",action:function(e){t.activeSegment=i=10,c(),e.close(),setTimeout(d,a)}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=i=9,c(),e.close(),setTimeout(d,a)}}]})}();break;case 5:case 6:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Stop and check for traffic! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=8,c(),e.close(),setTimeout(d,a)}},{label:"Full stop - continue straight when clear",action:function(e){t.activeSegment=i=7,c(),e.close(),setTimeout(d,a)}}]})}();break;case 7:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic signs - Avoid Riding on busy sidewalks! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=13,c(),e.close(),setTimeout(d,a)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=14,c(),e.close(),setTimeout(d,a)}}]})}();break;case 10:!function(){var n=e("<div></div>");n.append("Caution: Obey Traffic laws - Avoid Riding on busy sidewalks! <br />"),n.append('<img src="./images/left.png" />'),BootstrapDialog.show({title:"Defensive Riding: Don't take chances",message:n,buttons:[{label:"Full stop - turn left when clear",action:function(e){t.activeSegment=i=11,c(),e.close(),setTimeout(d,a)}},{label:"Full stop - continue straight to sidewalk",action:function(e){t.activeSegment=i=12,c(),e.close(),setTimeout(d,a)}}]})}()}else setTimeout(d,a)}null!==o.pathList&&setTimeout(d,a),t.activeSegment=i,t.speed=r,t.getPosition=function(){return s},t.setPosition=function(e){s=e}}).call(this,n(6))},function(e,t){e.exports=jQuery},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,a=null,i=null,s=null;t.createBike=function(){t.bike=s=new THREE.Object3D,s.mesh=new THREE.Object3D;var e=new THREE.MTLLoader;e.setTexturePath("assets/"),e.load("assets/Wheel_back1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_back1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-26,e.position.z=-5.5,t.back_wheel=o=e,s.mesh.add(e)})}),e.load("assets/Wheel_front1.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/Wheel_front1.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI/2,e.position.y=-9.5,e.position.z=-5.5,s.mesh.add(e),t.front_wheel=a=e})}),e.load("assets/frame-nopedals.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/frame-nopedals.obj",function(e){e.scale.set(5,5,5),e.rotation.z=Math.PI/2,e.position.set(0,-10,-5.5),s.mesh.add(e),e})}),e.load("assets/pedalsCrankArms.mtl",function(e){e.preload();var n=new THREE.OBJLoader;n.setMaterials(e),n.load("assets/pedalsCrankArms.obj",function(e){e.scale.set(.5,.5,.5),e.position.set(.5,-19,-5),t.pedals=i=e,s.mesh.add(e)})}),e.load("assets/riderinpos.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/riderinpos.obj",function(e){e.scale.set(5,5,5),e.rotation.y=Math.PI,e.rotation.x=Math.PI,e.rotation.x=Math.PI/2,e.position.set(0,-21,-9),e,s.mesh.add(e)})}),s.mesh.position.z=2.2,s.mesh.scale.set(.2,.2,.2)},t.bike=s,t.pedals=i,t.front_wheel=a,t.back_wheel=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=null,a=null,i=null;t.createTown=function(){t.town=o=new THREE.Object3D;var e=new THREE.MTLLoader;e.setTexturePath("assets/"),e.load("assets/road-design.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/road-design.obj",function(e){e.scale.set(24,24,24),e.rotation.x=Math.PI/2,o.add(e)})}),e.setTexturePath("assets/"),e.load("assets/houses-layout.mtl",function(e){e.preload();var t=new THREE.OBJLoader;t.setMaterials(e),t.load("assets/houses-layout.obj",function(e){e.scale.set(2,2,2),e.rotation.x=Math.PI/2,o.add(e)})}),(new THREE.ColladaLoader).load("assets/car-low-poly6.dae",function(e){(i=e.scene).scale.set(2,2,2),i.traverse(function(e){e instanceof THREE.SkinnedMesh&&(t.parkedCarDoor=a=e.skeleton.bones[0]),e.traverse(function(e){e.castShadow=!0,e.receiveShadow=!0,e.material instanceof THREE.MeshPhongMaterial&&(e.material.needsUpdate=!0)})}),i.updateMatrix(),i.rotation.z=Math.PI/2,i.rotation.x=0,i.position.set(-110,-173,0),o.add(i)})},t.town=o,t.parkedCarDoor=a}]);
//# sourceMappingURL=app.bundle.js.map