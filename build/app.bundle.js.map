{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./js/main.js","webpack:///./js/scene3d.js","webpack:///external \"jQuery\"","webpack:///./js/dbg_3d_coord.js"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","$","init","renderer","scene","camera","controls","bike","position","activeSegment","speed","pathList","hemisphereLight","shadowLight","up","THREE","Clock","Vector3","period","back_wheel","front_wheel","pedals","window","addEventListener","Colors","red","white","brown","pink","brownDark","lightblue","blue","orange","beige","grey","yellow","createPath","pId","src","dst","Path","moveTo","x","y","length","lineTo","segment","vertices","getSpacedPoints","point","lineGeometry","Geometry","lineMaterial","LineDashedMaterial","linewidth","color","dashSize","gapSize","line","Line","add","getAngle","getPoint","drawPath","check","$textAndPic","append","BootstrapDialog","show","title","message","buttons","label","action","dialogRef","close","setTimeout","decisionPoint1","decisionPoint2","decisionPoint3","decisionPoint8","decisionPoint5","decisionPoint4","decisionPoint6","decisionPoint7","tangent","getTangent","normalize","Math","atan","animate","mesh","angle","PI","quaternion","setFromAxisAngle","children","rotation","move","requestAnimationFrame","update","render","height","innerHeight","width","innerWidth","Scene","fog","Fog","_dbg_3d_coord2","default","z","WebGLRenderer","alpha","antialias","setSize","shadowMap","enabled","setPixelRatio","devicePixelRatio","document","getElementById","appendChild","domElement","aspectRatio","PerspectiveCamera","set","OrbitControls","enableDamping","dampingFactor","enableZoom","createScene","material","MeshBasicMaterial","wireframe","geometry","PlaneGeometry","floor","Mesh","container","Object3D","createFloor","HemisphereLight","DirectionalLight","castShadow","shadow","left","right","top","bottom","near","far","mapSize","mtlLoader","MTLLoader","setTexturePath","load","mtl","preload","objLoader","OBJLoader","setMaterials","scale","createBike","destP","createPaths","jQuery","setupAxis","colorHex","dashed","LineBasicMaterial","push","clone","axis","LineSegments","computeLineDistances","axes3d"],"mappings":"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","file":"app.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","'use strict';\n\n// require('babelify/polyfill');\n\nimport scene3d from './scene3d';\n\n// window.onload = function(){\n\n//   scene3d.init();\n\n// };\n\n// HANDLE MOUSE EVENTS\n\n// let mousePos = { x: 0, y: 0 };\n\n// function handleMouseMove(event) {\n//   let tx = -1 + (event.clientX / WIDTH)*2;\n//   let ty = 1 - (event.clientY / HEIGHT)*2;\n//   mousePos = {x:tx, y:ty};\n// }\n\n// window.addEventListener('load', scene3d.init, false);\n","/*\n  Create a 3D Scene for our town and cycling routes\n*/\n'use strict';\n\nimport debug3dAxes from './dbg_3d_coord';\n\n// let THREE =  require('three');\n// alternative syntax from es6\n// import * as THREE from 'three';\n// const scene = new THREE.Scene();\n\nlet renderer, scene, camera, controls, bike;\nlet angle = 0;\nlet position = 0;\nlet activeSegment = 0;\n// direction vector for movement\n// let direction = new THREE.Vector3(1, 0, 0);\n// let up = new THREE.Vector3(0, 0, 1);\n// let axis = new THREE.Vector3();\n// scalar to simulate speed\nlet speed = 1; //2.5;\nlet pathList = [], decisionPoints = [];\nlet hemisphereLight, shadowLight;\nlet clock = new THREE.Clock();\nlet up = new THREE.Vector3( 0, 0, 1 );\nlet axis = new THREE.Vector3( );\nlet radians, tangent;\nlet period = 2000; // periodic timer\nlet back_wheel = null;\nlet front_wheel = null;\nlet rider = null;\nlet pedals = null;\nlet frame = null;\n\nwindow.addEventListener('load', init, false);\n\nlet Colors = {\n  red:0xC61A05,\n  white:0xd8d0d1,\n  brown:0x59332e,\n  pink:0xF5A0F2,\n  brownDark:0x23190f,\n  lightblue: 0x80DFFF,\n  blue:0x0000FF,\n  orange:0xFC6531,\n  beige: 0xEBCDA4,\n  grey: 0x303030,\n  yellow: 0xFFFF1A\n};\n\nfunction createLights() {\n  // A hemisphere light is a gradient colored light; \n  // the first parameter is the sky color, the second parameter is the ground color, \n  // the third parameter is the intensity of the light\n  hemisphereLight = new THREE.HemisphereLight(0xaaaaaa,0x000000, 0.9);\n  \n  // A directional light shines from a specific direction. \n  // It acts like the sun, that means that all the rays produced are parallel. \n  shadowLight = new THREE.DirectionalLight(0xffffff, 0.9);\n\n  // Set the direction of the light  \n  shadowLight.position.set(150, 350, 350);\n  \n  // Allow shadow casting \n  shadowLight.castShadow = true;\n\n  // define the visible area of the projected shadow\n  shadowLight.shadow.camera.left = -400;\n  shadowLight.shadow.camera.right = 400;\n  shadowLight.shadow.camera.top = 400;\n  shadowLight.shadow.camera.bottom = -400;\n  shadowLight.shadow.camera.near = 1;\n  shadowLight.shadow.camera.far = 1000;\n\n  // define the resolution of the shadow; the higher the better, \n  // but also the more expensive and less performant\n  shadowLight.shadow.mapSize.width = 2048;\n  shadowLight.shadow.mapSize.height = 2048;\n  \n  // to activate the lights, just add them to the scene\n  scene.add(hemisphereLight);  \n  scene.add(shadowLight);\n}\n\n\nfunction createScene() {\n  //This function will create the scene, the camera and the renderer\n  // for this project\n  //The aspect ratio of the camera will be derived from the window's height\n  // width. the same parameters will be used for the renderer\n  let height = window.innerHeight;\n  let width = window.innerWidth;\n  scene = new THREE.Scene(); // for now scene is declared as a global variable\n  scene.fog = new THREE.Fog(Colors.white, 100, 1000);\n\n  scene.add(debug3dAxes(100));\n \n  scene.rotation.z += Math.PI/2;\n  scene.rotation.x -= Math.PI/2;\n\n  renderer = new THREE.WebGLRenderer({ \n    \n    alpha: true, \n\n    antialias: false // will experiment with turning this on\n  });\n  renderer.setSize( width, height );\n  // Enable shadow rendering for now\n  renderer.shadowMap.enabled = true;\n  renderer.setPixelRatio(window.devicePixelRatio);\n  // Add the DOM element of the renderer to the \n  // div townId container \n  let container = document.getElementById('townId');\n  container.appendChild(renderer.domElement);\n\n \n  let aspectRatio = width/height;\n  let fieldOfView = 45;\n  let nearPlane = 1,\n      farPlane = 10000;\n  // Camera setup: Do not add to scene to avoid rotation problems   \n  camera = new THREE.PerspectiveCamera(\n    fieldOfView,\n    aspectRatio,\n    nearPlane,\n    farPlane\n    );\n \n  camera.position.set(-50, 250, 450 );\n\n \n  controls = new THREE.OrbitControls(camera, renderer.domElement);\n  controls.enableDamping = true;\n  controls.dampingFactor = 0.25;\n  controls.enableZoom = true;\n  controls.update();\n\n}\n// First define a Bike Object\n\n// Bike = function(){\n//   // Create an empty container that will hold the different parts of the bike\n//   this.mesh = new THREE.Object3D();\n//   this.mesh.name = 'Bike';\n//   let aBike = new THREE.Object3D();;\n//   let geometry = new THREE.CylinderBufferGeometry( 5, 5, 2, 32 );\n//   let material = new THREE.MeshPhongMaterial( {color: Colors.red} );//before MeshBasicMaterial\n//   frontWheel = new THREE.Mesh( geometry, material );\n//   frontWheel.rotation.x = 1.7*Math.PI / 2; \n\n//   this.mesh.add( frontWheel );\n\n  \n//   // this.mesh.add(aBike);\n// }\n\nfunction createBike() {\n  bike = new THREE.Object3D();\n  bike.mesh = new THREE.Object3D();\n  // bike.backWheel = new THREE.Object3D();\n  // bike.frontWheel = new THREE.Object3D();\n  let mtlLoader = new THREE.MTLLoader();\n  mtlLoader.setTexturePath('assets/');\n  mtlLoader.load('assets/Wheel_back1.mtl', function (mtl) {\n\n    mtl.preload();\n\n    let objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(mtl);\n    // objLoader.setPath('/examples/ridesafely/assets/');\n    // objLoader.load('assets/norider_bicycle.obj', function (object) {\n       objLoader.load('assets/Wheel_back1.obj', function (object) {\n          object.scale.set(5, 5, 5);\n          object.rotation.y = Math.PI/2;\n          // object.position.z = 0;\n          // bike.backWheel.add(object);\n          object.position.y = -26;\n          object.position.z = -5.5;\n          back_wheel = object;\n          bike.mesh.add(object);\n          // bike.backWheel.add(object);\n          // bike.backWheel.position.y = 0;\n          scene.add(bike.mesh);\n        });\n    });\n\n    // Front Wheel loading\n     \n    mtlLoader.load('assets/Wheel_front1.mtl', function (mtl) {\n\n    mtl.preload();\n\n    let objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(mtl);\n        objLoader.load('assets/Wheel_front1.obj', function (object) {\n          object.scale.set(5, 5, 5);\n          object.rotation.y = Math.PI/2;\n          object.position.y = -9.5;\n          object.position.z = -5.5;\n          // bike.frontWheel.add(object);\n          bike.mesh.add(object);\n          front_wheel = object;\n       });\n  });\n   \n\n\n  mtlLoader.load('assets/frame-nopedals.mtl', function (mtl) {\n\n    mtl.preload();\n\n    let objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(mtl);\n       objLoader.load('assets/frame-nopedals.obj', function (object) {\n          object.scale.set(5, 5, 5);\n          object.rotation.z = Math.PI/2;\n          object.position.set(0,-10,-5.5);\n          bike.mesh.add(object);\n          frame = object;\n       });\n  });\n\n  // Pedals+crankArm\n\n  mtlLoader.load('assets/pedalsCrankArms.mtl', function (mtl) {\n\n    mtl.preload();\n\n    var objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(mtl);\n        objLoader.load('assets/pedalsCrankArms.obj', function (object) {\n          object.scale.set(0.5, 0.5, 0.5);\n          // object.rotation.z = Math.PI/2;\n          object.position.set(0.5,-19,-5.0);\n          // object.position.z = 0;\n          // bike.frontWheel.add(object);\n          pedals = object;\n          bike.mesh.add(object);\n\n       });\n  });\n\n  mtlLoader.load('assets/riderinpos.mtl', function (mtl) {\n\n    mtl.preload();\n\n    var objLoader = new THREE.OBJLoader();\n    objLoader.setMaterials(mtl);\n       objLoader.load('assets/riderinpos.obj', function (object) {\n          object.scale.set(5, 5, 5);\n          object.rotation.y = Math.PI;\n          object.rotation.x = Math.PI;\n          object.rotation.x=Math.PI/2;\n          // object.rotation.z=Math.PI/2;\n          object.position.set(0,-21,-9);\n          rider = object;\n      \n          bike.mesh.add(object);\n       });\n  });\n\n  bike.mesh.position.z = 10;\n\n}\n\nfunction createDecisionPoints() {\n  decisionPoint[0] = new THREE.Vector3(-160, -185, 0);\n  decisionPoint[1] = new THREE.Vector3(-160,35, 0);\n  decisionPoint[2] = new THREE.Vector3(-135, -185,0);\n  decisionPoint[3] = new THREE.Vector3(-40,-185,0);\n  decisionPoint[4] = new THREE.Vector3(-40,35,0);\n  decisionPoint[5] = new THREE.Vector3(110,-185,0);\n  decisionPoint[6] = new THREE.Vector3(110,35,0);\n  decisionPoint[7] = new THREE.Vector3(-40,35,0);\n}\n  \n\nfunction createPath(pId, src, dst) {\n\n  pathList[pId] = new THREE.Path();\n  pathList[pId].moveTo(src.x, src.y);\n  for (let i = 0; i < dst.length; i++) {\n    pathList[pId].lineTo(dst[i].x, dst[i].y);\n    // pathList[pId].quadraticCurveTo( dst[i].x-1, dst[i].y-1, dst[i].x, dst[i].y );\n  }\n\n  drawPath(pId);\n}\n\nfunction createPaths() {  \n\n  // the pathList\n  let destP = [], src;\n  \n  // P1 with 0 based indices\n  \n  src = new THREE.Vector3(-250,-240,0);\n  destP[0] = new THREE.Vector3(-160,-240,0);\n  destP[1] = new THREE.Vector3(-160,-185,0); \n  createPath(0, src, destP);\n\n  // P2 with 0 based indices\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-160,-185,0);\n  destP[0] = new THREE.Vector3(-160,35,0);\n  createPath(1, src, destP);\n\n  // P3\n  src = new THREE.Vector3(-160,35,0);\n  destP[0] = new THREE.Vector3(-160,185,0);\n  destP[1] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(2, src, destP);\n \n  // P4\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-160,-185,0);\n  destP[0] = new THREE.Vector3(-135,-185,0);\n  // 0 based indices\n  createPath(3, src, destP);\n  \n  // P5\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-160,35,0);\n  destP[0] = new THREE.Vector3(-40,35,0);\n  // 0 based indices\n  createPath(4, src, destP);\n\n  // P6\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-135,-185,0);\n  destP[0] = new THREE.Vector3(-80,-150,0);\n  destP[1] = new THREE.Vector3(-40,-185,0); \n  // 0 based indices\n  createPath(5, src, destP);\n\n  // P7\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-135,-185,0);\n  destP[0] = new THREE.Vector3(-80,-170,0);\n  destP[1] = new THREE.Vector3(-40,-185,0); \n  // 0 based indices\n  createPath(6, src, destP);\n\n  // P8\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-40,-185,0);\n  destP[0] = new THREE.Vector3(110,-185,0);\n  // 0 based indices\n  createPath(7, src, destP);\n\n  // P9\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-40,-185,0);\n  destP[0] = new THREE.Vector3(-40,35,0); // 35 instead of 10 to reach DP5\n  // 0 based indices\n  createPath(8, src, destP);\n\n  // P10\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-40,35,0);\n  destP[0] = new THREE.Vector3(-10,35,0);\n  destP[1] = new THREE.Vector3(-10,185,0);\n  destP[2] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(9, src, destP);\n  \n  // P11\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(-40,35,0);\n  destP[0] = new THREE.Vector3(110,35,0);\n  // 0 based indices\n  createPath(10, src, destP);\n\n  // P12\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(110,35,0);\n  destP[0] = new THREE.Vector3(110,185,0);\n  destP[1] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(11, src, destP);\n\n  // P13\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(110,35,0);\n  destP[0] = new THREE.Vector3(185,35,0);\n  destP[1] = new THREE.Vector3(185,185,0); \n  destP[2] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(12, src, destP);\n\n  // P14\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(110,-185,0);\n  destP[0] = new THREE.Vector3(110,35,0);\n  destP[1] = new THREE.Vector3(110,185,0); \n  destP[2] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(13, src, destP);\n\n  // P15\n  destP  = []; // reset destP array\n  src = new THREE.Vector3(110,-185,0);\n  destP[0] = new THREE.Vector3(185,-185,0);\n  destP[1] = new THREE.Vector3(185,185,0); \n  destP[2] = new THREE.Vector3(250,185,0); \n  // 0 based indices\n  createPath(14, src, destP);\n\n}\n\n\nfunction drawPath( segment ) {\n  let vertices = pathList[segment].getSpacedPoints(20);\n\n  // Change 2D points to 3D points\n  for (let i = 0; i < vertices.length; i++) {\n    let point = vertices[i];\n    vertices[i] = new THREE.Vector3(point.x, point.y, 0);\n  }\n  let lineGeometry = new THREE.Geometry();\n  lineGeometry.vertices = vertices;\n  let lineMaterial = new THREE.LineDashedMaterial({ linewidth: 1, color: Colors.red, dashSize: 3, gapSize: 3 });\n \n  // let lineMaterial = new THREE.LineBasicMaterial({\n  //   color: Colors.red\n  // });\n  let line = new THREE.Line(lineGeometry, lineMaterial);\n  scene.add(line);\n  // Start angle and point\n  previousAngle = getAngle( segment, position );\n  previousPoint = pathList[segment].getPoint( position );\n\n}\n\n\nlet Sky = function(){\n  this.mesh = new THREE.Object3D();\n  // Should add some birds and other flying objects\n  \n}\n\n\nfunction createSky(){\n  sky = new Sky();\n  sky.mesh.position.y = -600;\n  scene.add(sky.mesh);\n}\n\nlet Road = function(){\n  // this.mesh = new THREE.Object3D();\n  let geometry = new THREE.PlaneGeometry( 1000, 2000);\n  let material = new THREE.MeshBasicMaterial( {color: Colors.red, side: THREE.DoubleSide} );\n  this.mesh = new THREE.Mesh( geometry, material );\n  this.mesh.castShadow = true;\n  this.mesh.position.set(0,0,-5);\n}\n\nfunction createRoad() {\n  let road = new Road();\n  road.mesh.position.y = -600;\n  scene.add(road.mesh);\n}\n\nfunction createFloor() {\n  // create floor\n  let material = new THREE.MeshBasicMaterial({wireframe:true, color: 0x000000});\n  let geometry = new THREE.PlaneGeometry(500, 500, 20, 20);\n  let floor = new THREE.Mesh(geometry, material);\n  let container = new THREE.Object3D();\n  container.add(floor);\n  scene.add(container);\n\n}\nsetTimeout(check, period);\n\nfunction check() {\n  if (pathList[activeSegment] != null && pathList[activeSegment].getPoint(position) === null) \n  {\n     speed = 1;\n     switch (activeSegment) {\n        case 0:\n          decisionPoint1();\n          break;\n        case 1:\n          decisionPoint2();\n          break;\n        case 3:\n          decisionPoint3();\n          break;\n        case 4:\n          decisionPoint8();\n          break;\n        case 8:\n          decisionPoint5();\n          break;\n        case 5:\n        case 6:\n          decisionPoint4();\n          break;\n        case 7:\n          decisionPoint6();\n          break;\n        case 10:\n          decisionPoint7();\n          break;\n        case 2:\n        case 9:\n        case 11:\n        case 12:\n        case 13:\n        case 14:\n        default:\n          break;\n     }\n     \n  }\n  else {\n    setTimeout(check, period);\n  }\n\n}\n\n\nfunction decisionPoint1()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('What\\'s this cycling sign stand for? <br />');\n    $textAndPic.append('<img src=\"./images/right.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Guess what this means',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Continue Straight',\n            action: function(dialogRef){\n                activeSegment = 1; // P2\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Turn Right',\n            action: function(dialogRef){\n                activeSegment = 3;  //P4\n                position = 0;\n                speed=10;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n    \n}      \n\nfunction decisionPoint2()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('What\\'s this cycling sign stand for? <br />');\n    $textAndPic.append('<img src=\"./images/stop1.png\" />');\n    $textAndPic.append('Cautious going straight: busy traffic road ahead! <br />');\n    $textAndPic.append('Cautious turning right: traffic violation - entering one-way road against traffic! <br />');\n    \n    BootstrapDialog.show({\n        title: 'Guess what this means',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Continue Straight',\n            action: function(dialogRef){\n                activeSegment = 2; // P3\n                position = 0;\n                speed=2;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Turn Right',\n            action: function(dialogRef){\n                activeSegment = 4;  //P5\n                position = 0;\n                speed=2;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n    \n}\n\nfunction decisionPoint3()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: don\\'t crash into car door opening! <br />');\n    $textAndPic.append('<img src=\"./images/dooring.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'ride close',\n            action: function(dialogRef){\n                activeSegment = 6; // P7\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'steer away',\n            action: function(dialogRef){\n                activeSegment = 5;  //P6\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction decisionPoint4()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: Obey Traffic signs - Stop and check for traffic! <br />');\n    $textAndPic.append('<img src=\"./images/left.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Full stop - turn left when clear',\n            action: function(dialogRef){\n                activeSegment = 8; // P9\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Full stop - continue straight when clear',\n            action: function(dialogRef){\n                activeSegment = 7;  //P8\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction decisionPoint5()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: Obey Traffic signs - Stop and check for traffic! <br />');\n    $textAndPic.append('<img src=\"./images/right.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Full stop - turn right when clear',\n            action: function(dialogRef){\n                activeSegment = 10; // P11\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Full stop - continue straight when clear',\n            action: function(dialogRef){\n                activeSegment = 9;  //P10\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction decisionPoint6()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: Obey Traffic signs - Avoid Riding on busy sidewalks! <br />');\n    $textAndPic.append('<img src=\"./images/left.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Full stop - turn left when clear',\n            action: function(dialogRef){\n                activeSegment = 13; // P14\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Full stop - continue straight to sidewalk',\n            action: function(dialogRef){\n                activeSegment = 14;  //P15\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction decisionPoint7()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: Obey Traffic laws - Avoid Riding on busy sidewalks! <br />');\n    $textAndPic.append('<img src=\"./images/left.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Full stop - turn left when clear',\n            action: function(dialogRef){\n                activeSegment = 11; // P12\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Full stop - continue straight to sidewalk',\n            action: function(dialogRef){\n                activeSegment = 12;  //P13\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction decisionPoint8()\n{\n    let $textAndPic = $('<div></div>');\n    $textAndPic.append('Caution: Obey Traffic laws - Get Back on Track! <br />');\n    $textAndPic.append('<img src=\"./images/left.png\" />');\n    \n    BootstrapDialog.show({\n        title: 'Defensive Riding: Don\\'t take chances',\n        message: $textAndPic,\n        buttons: [{\n            label: 'Full stop - turn left when clear',\n            action: function(dialogRef){\n                activeSegment = 9; // P10\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }, {\n            label: 'Full stop - continue straight to sidewalk',\n            action: function(dialogRef){\n                activeSegment = 10;  //P11\n                position = 0;\n                dialogRef.close();\n                setTimeout(check, period);\n            }\n        }]\n    });\n   \n}\n\nfunction getActiveSegment(){\n    return activeSegment;\n}\nlet previousPoint, previousAngle;\nfunction move( segment ) {\n  \n  // add up position for movement\n  position += 0.002 * speed ;\n  \n  let point = pathList[segment].getPoint( position);\n  if (point === null) {\n    \n     return;\n  }\n  if (bike === null) {\n    return;\n  }\n  if (bike.mesh === null) {\n    return;\n  }\n  \n  bike.mesh.position.x = point.x-4;\n  bike.mesh.position.y = point.y+4;\n\n\n  let angle = getAngle(segment, position);\n  if (angle > 0) {\n    angle = - Math.PI + angle;\n  }\n  // set the quaternion\n  bike.mesh.quaternion.setFromAxisAngle( up, angle );\n\n  if (bike.mesh.children.length > 3) {\n      pedals.rotation.x -=0.1;\n      front_wheel.rotation.x -=0.1;\n      back_wheel.rotation.x -=0.1;\n      \n  }\n  \n  previousPoint = point;\n  previousAngle = angle;\n  \n}\n\nfunction getAngle( segment, position ){\n// get the 2Dtangent to the curve\n  let tangent = pathList[segment].getTangent(position).normalize();\n\n  // change tangent to 3D\n  let angle = - Math.atan( tangent.x / tangent.y);\n  \n  return angle;\n}\n\n// render\nfunction render() {\n\n  controls.update();\n  renderer.render(scene, camera);\n  \n}\n\n// animate\nfunction animate() {\n  let segment = getActiveSegment();\n  move(segment);\n  requestAnimationFrame(animate);\n  render();\n}\n\nexport function init() {\n\n  // set up the scene, the camera and the renderer\n  createScene();\n\n  createFloor();\n  // add the lights\n  createLights();\n\n  // add the objects\n  createBike();\n\n  createPaths();\n\n  // createRoad();\n\n  // createSky();\n\n  // start a loop that will update the objects' positions \n  // and render the scene on each frame\n  animate();\n}\n\n// HANDLE MOUSE EVENTS\n\nlet mousePos = { x: 0, y: 0 };\n\nfunction handleMouseMove(event) {\n  let tx = -1 + (event.clientX / WIDTH)*2;\n  let ty = 1 - (event.clientY / HEIGHT)*2;\n  mousePos = {x:tx, y:ty};\n}\n\nwindow.addEventListener('load', init, false);\n\n// export default {\n//   init:init;\n// };\n","module.exports = jQuery;","/*\n  Add a left hand cartesian system with RED x-axis, GREEN y-axis and BLUE z-axis\n*/\n\n'use strict';\n\n// let THREE =  require('three');\n\n// alternative syntax from es6\n// import * as THREE from 'three';\n// const scene = new THREE.Scene();\n\nfunction build3dAxes(length) {\n\tlength = length || 200; // 200 default if length not provided\n\tlet  axes3d = new THREE.Object3D();\n\t// build solid lines for positive axes and dashed for neg\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( length, 0, 0 ), 0xFF0000, false ) ); // +X red\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( -length, 0, 0 ), 0xFF0000, true) ); // -X red dashed\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, length, 0 ), 0x00FF00, false ) ); // +Y green\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, -length, 0 ), 0x00FF00, true ) ); // -Y green dashed\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, length ), 0x0000FF, false ) ); // +Z blue\n\taxes3d.add( setupAxis( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, -length ), 0x0000FF, true ) ); // -Z blue dashed\n\n  return axes3d;\n}\n\n\nfunction setupAxis( src, dst, colorHex, dashed ) {\n  let geometry = new THREE.Geometry(),\n    material;\n\n  if(dashed) {\n    material = new THREE.LineDashedMaterial({ color: colorHex, dashSize: 3, gapSize: 3 });\n  } else {\n    material = new THREE.LineBasicMaterial({ color: colorHex });\n  }\n\n  geometry.vertices.push( src.clone() );\n  geometry.vertices.push( dst.clone() );\n  // geometry.computeLineDistances(); // This one is SUPER important, otherwise dashed lines will appear as simple plain lines\n\n  let axis = new THREE.Line( geometry, material, THREE.LineSegments );\n  axis.computeLineDistances();\n  return axis;\n}\n\nexport default build3dAxes;"],"sourceRoot":""}